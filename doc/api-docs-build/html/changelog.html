

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Changelog &mdash; InVEST 3.8.9.post1013+gbc4bb051.d20201125 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.gif"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial: Batch Processing on Windows" href="scripting.html" />
    <link rel="prev" title="The InVEST CLI" href="cli.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> InVEST
          

          
            
            <img src="_static/invest-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.8.9.post1013
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing InVEST From Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">The InVEST CLI</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#unreleased-changes-3-9">Unreleased Changes (3.9)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">3.8.9 (2020-09-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">3.8.8 (2020-09-04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">3.8.7 (2020-07-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">3.8.6 (2020-07-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">3.8.5 (2020-06-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">3.8.4 (2020-06-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">3.8.3 (2020-05-29)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">3.8.2 (2020-05-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">3.8.1 (2020-05-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">3.8.0 (2020-02-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">3.7.0 (2019-05-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id12">3.6.0 (2019-01-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id13">3.5.0 (2018-08-14)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id14">3.4.4 (2018-03-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id15">3.4.3 (2018-03-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id16">3.4.2 (2017-12-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id17">3.4.1 (2017-12-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id18">3.4.0 (2017-12-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id19">3.3.3 (2017-02-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id20">3.3.2 (2016-10-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id21">3.3.1 (2016-06-13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id24">3.3.0 (2016-03-14)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id26">3.2.0 (2015-05-31)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id27">3.1.3 (2015-04-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id28">3.1.2 (2015-04-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id29">3.1.1 (2015-03-13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id30">3.1.0 (2014-11-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id31">3.0.1 (2014-05-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id32">3.0.0 (2014-03-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id33">2.6.0 (2013-12-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id34">2.5.6 (2013-09-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id35">2.5.5 (2013-08-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id36">2.5.4 (2013-06-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id37">2.5.3 (2013-03-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id38">2.5.2 (2013-03-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id39">2.5.1 (2013-03-12)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id40">2.5.0 (2013-03-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id41">2.4.5 (2013-02-01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id42">2.4.4 (2012-10-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id43">2.4.3 (2012-10-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id44">2.4.2 (2012-10-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id45">2.4.1 (2012-10-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id46">2.4.0 (2012-10-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id47">2.3.0 (2012-08-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id48">2.2.2 (2012-03-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id49">2.2.1 (2012-01-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id50">2.2.0 (2011-12-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id51">2.1.1 (2011-10-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta-2011-05-11">2.1 Beta (2011-05-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta-2011-02-14">2.0 Beta (2011-02-14)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scripting.html">Tutorial: Batch Processing on Windows</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">Full API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">InVEST</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Changelog</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/changelog.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="unreleased-changes-3-9">
<h2>Unreleased Changes (3.9)<a class="headerlink" href="#unreleased-changes-3-9" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="simple">
<dt>Annual Water Yield:</dt><dd><ul class="simple">
<li><p>Fixing bug that limited <code class="docutils literal notranslate"><span class="pre">rsupply</span></code> result when <code class="docutils literal notranslate"><span class="pre">wyield_mn</span></code> or
<code class="docutils literal notranslate"><span class="pre">consump_mn</span></code> was 0.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl>
<dt>General:</dt><dd><ul>
<li><p>Deprecating GDAL 2 and adding support for GDAL 3.</p></li>
<li><p>Adding function in utils.py to handle InVEST coordindate transformations.</p></li>
<li><p>Making InVEST compatible with Pygeoprocessing 2.0 by updating:
* <code class="docutils literal notranslate"><span class="pre">convolve_2d()</span></code> keyword <code class="docutils literal notranslate"><span class="pre">ignore_nodata</span></code> to</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">ignore_nodata_and_edges</span></code>.</p>
</div></blockquote>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_raster_info()</span></code> / <code class="docutils literal notranslate"><span class="pre">get_vector_info()</span></code> keyword <code class="docutils literal notranslate"><span class="pre">projection</span></code> to
<code class="docutils literal notranslate"><span class="pre">projection_wkt</span></code>.</p></li>
</ul>
</li>
<li><p>Improve consistency and context for error messages related to raster
reclassification across models by using <code class="docutils literal notranslate"><span class="pre">utils.reclassify_raster</span></code>.</p></li>
<li><p>Fixed bug that was causing a TypeError when certain input rasters had an
undefined nodata value. Undefined nodata values should now work
everywhere.</p></li>
<li><p>Include logging in python script generated from
“Save to python script…” in the “Development” menu. Now logging
messages from the model execution will show up when you run the script.</p></li>
<li><p>InVEST is now a 64-bit binary built against Python 3.7.</p></li>
<li><p>Adding Python 3.8 support for InVEST testing.</p></li>
<li><p>Add warning message to installer for 32-bit computers about installing
64-bit software.</p></li>
<li><p>Stop running validation extra times when model inputs autofill, saving
a small but noticeable amount of time in launching a model.</p></li>
<li><p>The number of files included in the python source distribution has been
reduced to just those needed to install the python package and run tests.</p></li>
<li><p>Code-sign the macOS distribution, and switch to a DMG distribution format.</p></li>
<li><p>No longer include the HTML docs or HISTORY.rst in the macOS distribution.</p></li>
<li><p>Bumped the <code class="docutils literal notranslate"><span class="pre">shapely</span></code> requirements to <code class="docutils literal notranslate"><span class="pre">&gt;=1.7.1</span></code> to address a library
import issue on Mac OS Big Sur.</p></li>
<li><p>Updated documentation on installing InVEST from source and wheels.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Coastal Blue Carbon</dt><dd><ul class="simple">
<li><p>Refactor of Coastal Blue Carbon that implements TaskGraph for task
management across the model and fixes a wide range of issues with the model
that were returning incorrect results in all cases.</p></li>
<li><p>Corrected an issue with the model where available memory would be exhausted
on a large number of timesteps.</p></li>
<li><p>In addition to the <code class="docutils literal notranslate"><span class="pre">execute</span></code> entrypoint, another entrypoint,
<code class="docutils literal notranslate"><span class="pre">execute_transition_analysis</span></code> has been added that allows access to the
transition analysis timeseries loop at a lower level.  This will enable
users comfortable with python to provide spatially-explicit maps of
accumulation rates, half lives and other parameters that can only be
provided via tables to <code class="docutils literal notranslate"><span class="pre">execute</span></code>.</p></li>
<li><p>Snapshot years and rasters, including the baseline year/raster, are now all
provided via a table mapping snapshot years to the path to a raster on
disk.  The baseline year is the earliest year of these.</p></li>
<li><p>The model’s “initial” and “lulc lookup” and “transient” tables have been
combined into a single “biophysical” table, indexed by LULC code/LULC class
name, that includes all of the columns from all of these former tables.</p></li>
<li><p>The “analysis year” is now a required input that must be &gt;= the final
snapshot year in the snapshots CSV.</p></li>
<li><p>Litter can now accumulate at an annual rate if desired.</p></li>
<li><p>The model now produces many more files, which allows for greater
flexibility in post-processing of model outputs.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Coastal Vulnerability</dt><dd><ul class="simple">
<li><p>‘shore_points_missing_geomorphology.gpkg’ output file name now includes
the suffix if any, and its one layer now is renamed from
‘missing_geomorphology’ to be the same as the file name
(including suffix).</p></li>
<li><p>Fixed a memory bug that occurred during shore point interpolation when
dealing with very large landmass vectors.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Delineateit</dt><dd><ul class="simple">
<li><p>The layer in the ‘preprocessed_geometries.gpkg’ output is renamed from
‘verified_geometries’ to be the same as the file name (including suffix).</p></li>
<li><p>The layer in the ‘snapped_outlets.gpkg’ output is renamed from
‘snapped’ to be the same as the file name (including suffix).</p></li>
<li><p>The layer in the ‘watersheds.gpkg’ output has been renamed from
‘watersheds’ to match the name of the vector file (including the suffix).</p></li>
<li><p>Added pour point detection option as an alternative to providing an
outlet features vector.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Habitat Quality:</dt><dd><ul class="simple">
<li><p>Refactor of Habitat Quality that implements TaskGraph</p></li>
<li><p>Threat files are now indicated in the Threat Table csv input under
required columns: <code class="docutils literal notranslate"><span class="pre">BASE_PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">CUR_PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">FUT_PATH</span></code>.</p></li>
<li><p>Threat and Sensitivity column names are now case-insensitive.</p></li>
<li><p>Sensitivity threat columns now match threat names from Threat Table
exactly, without the need for “<a href="#id52"><span class="problematic" id="id53">L_</span></a>”. “<a href="#id54"><span class="problematic" id="id55">L_</span></a>” prefix is deprecated.</p></li>
<li><p>Threat raster input folder has been removed.</p></li>
<li><p>Validation enhancements that check whether threat raster paths are valid.</p></li>
<li><p>HQ update to User’s Guide.</p></li>
<li><p>Changing sample data to reflect Threat Table csv input changes and
bumping revision.</p></li>
<li><p>More comprehensive testing for Habitat Quality and validation.</p></li>
<li><p>Checking if Threat raster values are between 0 and 1 range, raising
ValueError if not. No longer snapping values less than 0 to 0 and greater
than 1 to 1.</p></li>
<li><p>Fixing bug that was setting Threat raster values to 1 even if they were
floats between 0 and 1.</p></li>
<li><p>Updating how threats are decayed across distance. Before, nodata edges
were ignored causing values on the edges to maintain a higher threat
value. Now, the decay does not ignore those nodata edges causing values
on the edges to decay more quickly. The area of study should have
adequate boundaries to account for these edge effects.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Seasonal Water Yield</dt><dd><ul class="simple">
<li><p>Fixed a bug where precip or eto rasters of <code class="docutils literal notranslate"><span class="pre">GDT_Float64</span></code> with values
greater than 32-bit would overflow to <code class="docutils literal notranslate"><span class="pre">-inf</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SDR:</dt><dd><ul class="simple">
<li><p>Fixing an issue where the LS factor should be capped to an upstream area
of 333^2 m^2. In previous versions the LS factor was erroneously capped
to “333” leading to high export spikes in some pixels.</p></li>
<li><p>Fixed an issue where sediment deposition progress logging was not
progressing linearly.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Finfish</dt><dd><ul class="simple">
<li><p>Fixed a bug where the suffix input was not being used for output paths.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Urban Cooling</dt><dd><ul class="simple">
<li><p>Split energy savings valuation and work productivity valuation into
separate UI options.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id1">
<h2>3.8.9 (2020-09-15)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>Hydropower</dt><dd><ul>
<li><p>Fixed bug that prevented validation from ever passing for this model.
Validation will allow extra keys in addition to those in the ARGS_SPEC.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Urban Flood Mitigation</dt><dd><ul>
<li><p>Fixed incorrect calculation of total quickflow volume.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2>3.8.8 (2020-09-04)<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>Coastal Vulnerability</dt><dd><ul>
<li><p>Improved handling of invalid AOI geometries to avoid crashing and instead
fix the geometry when possible and skip it otherwise.</p></li>
<li><p>Added validation check that shows a warning if the SLR vector is not
a point or multipoint geometry.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Urban Cooling</dt><dd><ul>
<li><p>Energy units are now (correctly) expressed in kWh.  They were previously
(incorrectly) expressed in kW.</p></li>
<li><p>Energy savings calculations now require that consumption is in units of
kWh/degree C/m^2 for each building class.</p></li>
<li><p>Fixing an issue where blank values of the Cooling Coefficient weights
(shade, albedo, ETI) would raise an error.  Now, a default value for the
coefficient is assumed if any single value is left blank.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>HRA</dt><dd><ul>
<li><p>Raise ValueError if habitat or stressor inputs are not projected.</p></li>
<li><p>Make sample data rating filepaths work on Mac. If not on Windows and a rating
filepath isn’t found, try replacing all backslashes with forward slashes.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Seasonal Water Yield</dt><dd><ul>
<li><p>Updated output file name from aggregated_results.shp to aggregated_results_swy.shp
for consistency with NDR and SDR</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Datastack</dt><dd><ul>
<li><p>Saved datastack archives now use helpful identifying names for spatial input folders</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Validation</dt><dd><ul>
<li><p>Fixed bug that caused fields activated by a checkbox to make validation fail,
even when the checkbox was unchecked.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>General</dt><dd><ul>
<li><p>Input table column headers are now insensitive to leading/trailing whitespace in
most places.</p></li>
<li><p>Modified the script that produces a conda environment file from InVEST’s python
requirements file so that it includes the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel in the file
itself.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Recreation</dt><dd><ul>
<li><p>Validate values in the type column of predictor tables early in execution. Raise
a ValueError if a type value isn’t valid (leading/trailing whitespace is okay).</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Validation</dt><dd><ul>
<li><p>Set a 5-second timeout on validation functions that access a file. This will raise
a warning and prevent validation from slowing down the UI too much.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id3">
<h2>3.8.7 (2020-07-17)<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>General</dt><dd><ul>
<li><p>Fixed an issue where some users would be unable to launch InVEST binaries
on Windows.  This crash was due to a configuration issue in
<code class="docutils literal notranslate"><span class="pre">PySide2==5.15.0</span></code> that will be fixed in a future release of PySide2.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>GLOBIO</dt><dd><ul>
<li><p>Fix a bug that mishandled combining infrastructure data when only one
infrastructure data was present.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Urban Flood Risk</dt><dd><ul>
<li><p>The output vector <code class="docutils literal notranslate"><span class="pre">flood_risk_service.shp</span></code> now includes a field,
<code class="docutils literal notranslate"><span class="pre">flood_vol</span></code> that is the sum of the modeled flood volume (from
<code class="docutils literal notranslate"><span class="pre">Q_m3.tif</span></code>) within the AOI.</p></li>
<li><p>Fieldnames in <code class="docutils literal notranslate"><span class="pre">flood_risk_service.shp</span></code> have been updated to more
closely match the variables they match as documented in the User’s Guide
chapter.  Specifically, <code class="docutils literal notranslate"><span class="pre">serv_bld</span></code> is now <code class="docutils literal notranslate"><span class="pre">serv.blt</span></code> and <code class="docutils literal notranslate"><span class="pre">aff_bld</span></code>
is now <code class="docutils literal notranslate"><span class="pre">aff.bld</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Q_mm.tif</span></code> has been moved from the intermediate directory into the
workspace.</p></li>
<li><p>Fixed a bug in the flood volume (<code class="docutils literal notranslate"><span class="pre">Q_m3.tif</span></code>) calculations that was
producing incorrect values in all cases.</p></li>
<li><p>Fixed a bug where input rasters with nodata values of 0 were not handled
properly.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id4">
<h2>3.8.6 (2020-07-03)<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>Crop Production</dt><dd><ul>
<li><p>Fixed critical bug in crop regression that caused incorrect yields in
all cases.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id5">
<h2>3.8.5 (2020-06-26)<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>General</dt><dd><ul>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">utils.build_lookup_from_csv</span></code> that was allowing
<code class="docutils literal notranslate"><span class="pre">key_field</span></code> to be non unique and overwriting values.</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">utils.build_lookup_from_csv</span></code> where trailing commas caused
returned values to be malformed.</p></li>
<li><p>Add optional argument <code class="docutils literal notranslate"><span class="pre">column_list</span></code> to <code class="docutils literal notranslate"><span class="pre">utils.build_lookup_from_csv</span></code>
that takes a list of column names and only returns those in the
dictionary.</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">warn_if_missing</span></code> argument from <code class="docutils literal notranslate"><span class="pre">utils.build_lookup_from_csv</span></code>
and warning by default.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Scenic Quality</dt><dd><ul>
<li><p>Fixing an issue in Scenic Quality where the creation of the weighted sum
of visibility rasters could cause “Too Many Open Files” errors and/or
<code class="docutils literal notranslate"><span class="pre">MemoryError</span></code> when the model is run with many viewpoints.</p></li>
<li><p>Progress logging has been added to several loops that may take a longer
time when the model is run with thousands of points at a time.</p></li>
<li><p>A major part of the model’s execution was optimized for speed,
particularly when the model is run with many, many points.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SDR:</dt><dd><ul>
<li><p>Removed the unused parameter <code class="docutils literal notranslate"><span class="pre">args['target_pixel_size']</span></code> from the SDR
<code class="docutils literal notranslate"><span class="pre">execute</span></code> docstring.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Urban Flood Risk Mitigation</dt><dd><ul>
<li><p>Fixed an issue where the output vector <code class="docutils literal notranslate"><span class="pre">flood_risk_service.shp</span></code> would
only be created when the built infrastructure vector was provided.  Now,
the <code class="docutils literal notranslate"><span class="pre">flood_risk_service.shp</span></code> vector is always created, but the fields
created differ depending on whether the built infrastructure input is
present during the model run.</p></li>
<li><p>Fixed an issue where the model would crash if an infrastructure geometry
were invalid or absent.  Such features are now skipped.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id6">
<h2>3.8.4 (2020-06-05)<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>General:</dt><dd><ul>
<li><p>Advanced the <code class="docutils literal notranslate"><span class="pre">Taskgraph</span></code> version requirement to fix a bug where workspace
directories created by InVEST versions &lt;=3.8.0 could not be re-used by more
recent InVEST versions.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>NDR:</dt><dd><ul>
<li><p>The Start Menu shortcut on Windows and launcher label on Mac now have
consistent labels for NDR: “NDR: Nutrient Delivery Ratio”.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SDR:</dt><dd><ul>
<li><p>The Start Menu shortcut on Windows and launcher label on Mac now have
consistent labels for SDR: “SDR: Sediment Delivery Ratio”.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id7">
<h2>3.8.3 (2020-05-29)<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>sdr
* SDR’s compiled core now defines its own <code class="docutils literal notranslate"><span class="pre">SQRT2</span></code> instead of relying on an</p>
<blockquote>
<div><p>available standard C library definition. This new definition helps to avoid
some compiler issues on Windows.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="id8">
<h2>3.8.2 (2020-05-15)<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>InVEST’s CSV encoding requirements are now described in the validation
error message displayed when a CSV cannot be opened.</p></li>
</ul>
</div>
<div class="section" id="id9">
<h2>3.8.1 (2020-05-08)<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a compilation issue on Mac OS X Catalina.</p></li>
<li><p>Fixed an issue with NDR’s raster normalization function so that Float64
nodata values are now correctly cast to Float32.  This issue was affecting
the summary vector, where the <code class="docutils literal notranslate"><span class="pre">surf_n</span></code>, <code class="docutils literal notranslate"><span class="pre">sub_n</span></code> and <code class="docutils literal notranslate"><span class="pre">n_export_tot</span></code>
columns would contain values of <code class="docutils literal notranslate"><span class="pre">-inf</span></code>.</p></li>
<li><p>Fixed minor bug in Coastal Vulnerability shore point creation. Also added a
check to fail fast when zero shore points are found within the AOI.</p></li>
<li><p>The Finfish Aquaculture model no longer generates histograms for
uncertainty analysis due to issues with matplotlib that make InVEST
unstable. See <a class="reference external" href="https://github.com/natcap/invest/issues/87">https://github.com/natcap/invest/issues/87</a> for more.</p></li>
<li><p>Corrected the Urban Cooling Model’s help text for the “Cooling Capacity
Calculation Method” in the User Interface.</p></li>
<li><p>Fixing an issue with SDR’s <code class="docutils literal notranslate"><span class="pre">LS</span></code> calculations.  The <code class="docutils literal notranslate"><span class="pre">x</span></code> term is now
the weighted mean of proportional flow from the current pixel into its
neighbors.  Note that for ease of debugging, this has been implemented as a
separate raster and is now included in <code class="docutils literal notranslate"><span class="pre">RKLS</span></code> calculations instead of in
the <code class="docutils literal notranslate"><span class="pre">LS</span></code> calculations.</p></li>
<li><p>Fixed a bug in validation where checking for spatial overlap would be skipped
entirely in cases where optional model arguments were not used.</p></li>
<li><p>Bumping the <code class="docutils literal notranslate"><span class="pre">psutil</span></code> dependency requirement to <code class="docutils literal notranslate"><span class="pre">psutil&gt;=5.6.6</span></code> to address
a double-free vulnerability documented in CVE-2019-18874.</p></li>
<li><p>Adding a GitHub Actions workflow for building python wheels for Mac and Windows
as well as a source distribution.</p></li>
<li><p>Updating links in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, <code class="docutils literal notranslate"><span class="pre">README.rst</span></code> and <code class="docutils literal notranslate"><span class="pre">README_PYTHON.rst</span></code> to
refer to the repository’s new home on github.</p></li>
<li><p>Binary builds for Windows and Mac OS X have been moved to GitHub Actions from
AppVeyor.  All AppVeyor-specific configuration has been removed.</p></li>
<li><p>Fixing an issue with the InVEST Makefile where <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">deploy</span></code> was
attempting to synchronize nonexistent sample data zipfiles with a storage
bucket on GCP.  Sample data zipfiles are only built on Windows, and so
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">deploy</span></code> will only attempt to upload them when running on Windows.</p></li>
<li><p>Fixed a bug in CLI logging where logfiles created by the CLI were
incompatible with the <code class="docutils literal notranslate"><span class="pre">natcap.invest.datastack</span></code> operation that
allows the UI to load model arguments from logfiles.</p></li>
<li><p>Added error-handling in Urban Flood Risk Mitigation to tell users to
“Check that the Soil Group raster does not contain values other than
(1, 2, 3, 4)” when a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is raised from <code class="docutils literal notranslate"><span class="pre">_lu_to_cn_op</span></code>.</p></li>
<li><p>Updated the <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> to use the new git location of the InVEST User’s
Guide repository at <a class="reference external" href="https://github.com/natcap/invest.users-guide">https://github.com/natcap/invest.users-guide</a></p></li>
<li><p>Automated tests are now configured to use Github Actions for 32- and 64-bit
build targets for Python 3.6 and 3.7 on Windows.  We are still using
AppVeyor for our binary builds for the time being.</p></li>
<li><p>Makefile has been updated to fetch the version string from <code class="docutils literal notranslate"><span class="pre">git</span></code> rather
than <code class="docutils literal notranslate"><span class="pre">hg</span></code>.  A mercurial client is still needed in order to clone the
InVEST User’s Guide.</p></li>
<li><p>Removing Python 2 compatibility code such as <code class="docutils literal notranslate"><span class="pre">future</span></code>, <code class="docutils literal notranslate"><span class="pre">pyqt4</span></code>,
<code class="docutils literal notranslate"><span class="pre">basestring</span></code>, <code class="docutils literal notranslate"><span class="pre">unicode</span></code>, <code class="docutils literal notranslate"><span class="pre">six</span></code>, unicode casting, etc…</p></li>
<li><p>Update api-docs conf file to mock sdr.sdr_core and to use updated unittest
mock</p></li>
</ul>
</div>
<div class="section" id="id10">
<h2>3.8.0 (2020-02-07)<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Created a sub-directory for the sample data in the installation directory.</p></li>
<li><p>Fixed minor bug in HRA that was duplicating the <code class="docutils literal notranslate"><span class="pre">results_suffix</span></code> in some
output filenames.</p></li>
<li><p>Updated the DelineateIt UI to improve the language around what the model
should do when it encounters invalid geometry.  The default is now
that it should skip invalid geometry.</p></li>
<li><p>Updating how threat rasters are handled in Habitat Quality to address a few
related and common usability issues for the model.  First, threat
rasters are now aligned to the LULC instead of the intersection of the whole
stack.  This means that the model now handles threat inputs that do not all
completely overlap the LULC (they must all still be in the same projection).
Second, nodata values in threat rasters are converted to a threat value of 0.
Any threat pixel values other than 0 or nodata are interpreted as a threat
value of 1.</p></li>
<li><p>Updating the <code class="docutils literal notranslate"><span class="pre">psutil</span></code> requirement to avoid a possible import issue when
building binaries under WINE.  Any version of <code class="docutils literal notranslate"><span class="pre">psutil</span></code> should work
except for <code class="docutils literal notranslate"><span class="pre">5.6.0</span></code>.</p></li>
<li><p>InVEST sample data was re-organized to simply have one folder per model.
New datastacks were added for SDR, NDR, Seasonal Water Yield,
Annual Water Yield, DelineateIt, and Coastal Vulnerability.</p></li>
<li><p>Fixed an issue with NDR where the model was not properly checking for the
bounds of the raster, which could in some cases lead to exceptions being
printed to the command-line.  The model now correctly checks for these
raster boundaries.</p></li>
<li><p>Habitat Risk Assessment model supports points and lines – in addition to
previously supported polygons and rasters – for habitats or stressors.</p></li>
<li><p>Updated raster percentile algorithms in Scenic Quality and Wave Energy
models to use a more efficient and reliable raster percentile function
from pygeoprocessing.</p></li>
<li><p>InVEST is now compatible with pygeoprocessing 1.9.1.</p></li>
<li><p>All InVEST models now have an <code class="docutils literal notranslate"><span class="pre">ARGS_SPEC</span></code> object that contains metadata
about the model and describes the model’s arguments.  Validation has been
reimplemented across all models to use these <code class="docutils literal notranslate"><span class="pre">ARGS_SPEC</span></code> objects.</p></li>
<li><p>The results suffix key for the Wave Energy and Wind Energy models has been
renamed <code class="docutils literal notranslate"><span class="pre">results_suffix</span></code> (was previously <code class="docutils literal notranslate"><span class="pre">suffix</span></code>).  This is for
consistency across InVEST models.</p></li>
<li><p>Speed and memory optimization of raster processing in the Recreation model.</p></li>
<li><p>Removed a constraint in Coastal Vulnerability so the AOI polygon no longer
needs to intersect the continental shelf contour line. So the AOI can now be
used exclusively to delineate the coastal area of interest.</p></li>
<li><p>Improved how Coastal Vulnerability calculates local wind-driven waves.
This requires a new bathymetry raster input and implements equation 10
of the User Guide. Also minor updates to fields in intermediate outputs,
notably a ‘shore_id’ field is now the unique ID for joining tables and
FIDs are no longer used.</p></li>
<li><p>Added a status message to the UI if a datastack file fails to load,
instead of staying silent.</p></li>
<li><p>Correcting an issue with repository fetching in the InVEST <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>.
Managed repositories will now be fetched and updated to the expected revision
even if the repository already exists.</p></li>
<li><p>Fixed the duplicate <code class="docutils literal notranslate"><span class="pre">results_suffix</span></code> input in Wave Energy UI.</p></li>
<li><p>Added a human-friendly message on NDR model <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>.</p></li>
<li><p>Adding a check to Annual Water Yield to ensure that the <code class="docutils literal notranslate"><span class="pre">LULC_veg</span></code> column
has correct values.</p></li>
<li><p>Improved how Seasonal Water Yield handles nodata values when processing
floating-point precipitation and quickflow rasters.</p></li>
<li><p>Add SDR feature to model sediment deposition across the landscape.</p></li>
<li><p>Fixed an issue that would cause an exception if SDR landcover map was masked
out if the original landcover map had no-nodata value defined.</p></li>
<li><p>Fixed an issue in the SDR model that could cause reported result vector
values to not correspond with known input vectors if the input watershed
vector was not an ESRI Shapefile.</p></li>
<li><p>Fixed issue in Seasonal Water Yield model that would cause an unhandled
exception when input rasters had areas of a valid DEM but nodata in other
input layers that overlap that dem.</p></li>
<li><p>Fixed an issue in the NDR model that would cause an exception if the critical
length of a landcover field was set to 0.</p></li>
<li><p>Implemented PEP518-compatible build system definition in the file
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>.  This should make it easier to install <code class="docutils literal notranslate"><span class="pre">natcap.invest</span></code>
from a source distribution.</p></li>
<li><p>Fixed a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> issue in Seasonal Water Yield that would occur when
the Land-Use/Land-Cover raster did not have a defined nodata value.  This
case is now handled correctly.</p></li>
<li><p>The binary build process for InVEST on Windows (which includes binaries
based on PyInstaller and an NSIS Installer package) has been migrated
to 32-bit Python 3.7.  The build itself is taking place on AppVeyor, and
the configuration for this is contained within <code class="docutils literal notranslate"><span class="pre">appveyor.yml</span></code>.
Various python scripts involved in the distribution and release processes
have been updated for compatibility with python 3.7 as a part of this
migration.</p></li>
<li><p>Fixed an <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> issue in Wave Energy encountered in runs using
the global wave energy dataset.  This error was the result of an incorrect
spatial query of points and resulted in some wave energy points being
double-counted.</p></li>
<li><p>Fixed taskgraph-related issues with Habitat Risk Assessment where
1) asynchronous mode was failing due to missing task dependencies and
2) avoided recomputation was confounded by two tasks modifying the same files.</p></li>
<li><p>Fixed an issue with Habitat Quality where the model was incorrectly
expecting the sensitivity table to have a landcover code of 0.</p></li>
<li><p>The InVEST CLI has been completely rebuilt to divide
functionality into various topic-specific subcommands.  The various internal
consumers of this API have been updated accordingly.  <code class="docutils literal notranslate"><span class="pre">invest</span> <span class="pre">--help</span></code> will
contain details of the new interface.</p></li>
<li><p>Updated the InVEST Launcher to list the human-readable model names rather
than the internal model identifiers.</p></li>
<li><p>Updated Coastal Vulnerability Model with significant speedups including
~40x speedup for geomorphology process and ~3x speedup for wind exposure process.
Also saving an intermediate vector with wave energy values and a geomorphology
vector with points that were assigned the <code class="docutils literal notranslate"><span class="pre">geomorphology_fill_value</span></code>.</p></li>
<li><p>Updated trove classifiers to indicate support for python versions 2.7, 3.6
and 3.7.</p></li>
<li><p>Updated all InVEST models to be compatible with a Python 2.7 or a Python 3.6
environment. Also tested all models against GDAL versions 2.2.4 and 2.4.1.</p></li>
<li><p>Fixed an issue with Habitat Quality where convolutions over threat rasters
were not excluding nodata values, leading to incorrect outputs.  Nodata values
are now handled correctly and excluded from the convolution entirely.</p></li>
<li><p>Updated the subpackage <code class="docutils literal notranslate"><span class="pre">natcap.invest.ui</span></code> to work with python 3.6 and later
and also to support the PySide2 bindings to Qt5.</p></li>
<li><p>InVEST Coastal Blue Carbon model now writes out a net present value
raster for the year of the current landcover, each transition year,
and the final analysis year (if provided).</p></li>
<li><p>Correcting an issue with InVEST Coastal Blue Carbon where incorrect
configuration of a nodata value would result in <code class="docutils literal notranslate"><span class="pre">-inf</span></code> values in
output rasters.  Now, any values without a defined reclassification
rule that make it past validation will be written out as nodata.</p></li>
<li><p>DelineateIt has been reimplemented using the latest version of
pygeoprocessing (and the watershed delineation routine it provides) and now
uses <code class="docutils literal notranslate"><span class="pre">taskgraph</span></code> for avoiding unnecessary recomputation.</p></li>
<li><p>Fixed a bug in Recreation Model that was causing server-side code
to execute twice for every client-side call.</p></li>
<li><p>Fixed a bug in Recreation model that did not apply <code class="docutils literal notranslate"><span class="pre">results_suffix</span></code> to
the monthly_table.csv output.</p></li>
<li><p>Various fixes in Coastal Vulnerability Model. CSV output files now
have FID column for joining to vector outputs. <code class="docutils literal notranslate"><span class="pre">results_suffix</span></code> can be
used without triggering task re-execution. Raster processing maintains original
resolution of the input raster so long as it is projected. Otherwise resamples
to <code class="docutils literal notranslate"><span class="pre">model_resolution</span></code>.</p></li>
<li><p>Fixed a bug in Coastal Vulnerability model’s task graph that sometimes
caused an early task to re-execute when it should be deemed pre-calculated.</p></li>
<li><p>Fixed a bug in the pollination model that would cause outputs to be all 0
rasters if all the <code class="docutils literal notranslate"><span class="pre">relative_abundance</span></code> fields in the guild table were
integers.</p></li>
<li><p>Fixed a file cache flushing issue observed on Debian in
<code class="docutils literal notranslate"><span class="pre">utils.exponential_decay_kernel_raster</span></code> that would cause an exponential
kernel raster to contain random values rather than expected value.</p></li>
<li><p>Added a new InVEST model: Urban Flood Risk Mitigation.</p></li>
<li><p>Fixed an issue in the SDR model that would cause an unhandled exception
if either the erosivity or erodibility raster had an undefined nodata value.</p></li>
<li><p>Added a new InVEST model: Urban Cooling Model.</p></li>
</ul>
</div>
<div class="section" id="id11">
<h2>3.7.0 (2019-05-09)<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Refactoring Coastal Vulnerability (CV) model. CV now uses TaskGraph and
Pygeoprocessing &gt;=1.6.1. The model is now largely vector-based instead of
raster-based. Fewer input datasets are required for the same functionality.
Runtime in sycnhronous mode is similar to previous versions, but runtime can
be reduced with multiprocessing. CV also supports avoided recomputation for
successive runs in the same workspace, even if a different file suffix is
used. Output vector files are in CSV and geopackage formats.</p></li>
<li><p>Model User Interface ‘Report an Issue’ link points to our new
community.naturalcapitalproject.org</p></li>
<li><p>Correcting an issue with the Coastal Blue Carbon preprocessor where
using misaligned landcover rasters would cause an exception to be raised.</p></li>
<li><p>Correcting an issue with RouteDEM where runs of the tool with Flow Direction
enabled would cause the tool to crash if <code class="docutils literal notranslate"><span class="pre">n_workers</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>.</p></li>
<li><p>Correcting an issue with Habitat Quality’s error checking where nodata values
in landcover rasters were not being taken into account.</p></li>
<li><p>Valuation is now an optional component of the InVEST Scenic Quality model.</p></li>
<li><p>Fixing a bug in the percentiles algorithm used by Scenic Quality that
would result in incorrect visual quality outputs.</p></li>
<li><p>Carbon Model and Crop Production models no longer crash if user-input
rasters do not have a nodata value defined. In this case these models
treat all pixel values as valid data.</p></li>
<li><p>Adding bitbucket pipelines and AppVeyor build configurations.</p></li>
<li><p>Refactoring Recreation Model client to use taskgraph and the latest
pygeoprocessing. Avoided re-computation from taskgraph means that
successive model runs with the same AOI and gridding option can re-use PUD
results and avoid server communication entirely. Successive runs with the
same predictor data will re-use intermediate geoprocessing results.
Multiprocessing offered by taskgraph means server-side PUD calculations
and client-side predictor data processing can happen in parallel. Some
output filenames have changed.</p></li>
<li><p>Upgrading to SDR to use new PyGeoprocessing multiflow routing, DEM pit
filling, contiguous stream extraction, and TaskGraph integration. This
also includes a new TaskGraph feature that avoids recomputation by copying
results from previous runs so long as the expected result would be
identical. To use this feature, users must execute successive runs of SDR
in the same workspace but use a different file suffix. This is useful when
users need to do a parameter study or run scenarios with otherwise minor
changes to inputs.</p></li>
<li><p>Refactoring Habitat Risk Assessment (HRA) Model to use TaskGraph &gt;= 0.8.2 and
Pygeoprocessing &gt;= 1.6.1. The HRA Proprocessor is removed and its previous
functionality was simplified and merged into the HRA model itself.
The model will no longer generate HTML plots and tables.</p></li>
<li><p>Adding a software update notification button, dialog, and a link to the
download page on the User Interface when a new InVEST version is available.</p></li>
<li><p>Migrating the subversion sample and test data repositories to Git LFS
repositories on BitBucket. Update the repository URL and fetch commands on
Makefile accordingly.</p></li>
<li><p>Fixing a bug in Habitat Quality UI where the absence of the required
half_saturation_constant variable did not raise an exception.</p></li>
<li><p>Adding encoding=’utf-8-sig’ to pandas.read_csv() to support
utils.build_lookup_from_csv() to read CSV files encoded with UTF-8 BOM
(byte-order mark) properly.</p></li>
</ul>
</div>
<div class="section" id="id12">
<h2>3.6.0 (2019-01-30)<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Correcting an issue with the InVEST Carbon Storage and Sequestration model
where filepaths containing non-ASCII characters would cause the model’s
report generation to crash.  The output report is now a UTF-8 document.</p></li>
<li><p>Refactoring RouteDEM to use taskgraph and the latest pygeoprocessing
(<code class="docutils literal notranslate"><span class="pre">&gt;=1.5.0</span></code>).  RouteDEM now fills hydrological sinks and users have the
option to use either of the D8 or Multiple Flow Direction (MFD) routing
algorithms.</p></li>
<li><p>Adding a new input to the InVEST Settings window to allow users to customize
the value that should be used for the <code class="docutils literal notranslate"><span class="pre">n_workers</span></code> parameter in
taskgraph-enabled models.  This change involves removing the “Number of
Parallel Workers” input from the model inputs pane for some models in
favor of this new location.  The default value for this setting is <code class="docutils literal notranslate"><span class="pre">-1</span></code>,
indicating synchronous (non-threaded, non-multiprocessing) execution of
tasks.</p></li>
<li><p>Removing Scenario Generator: Rule-based model.</p></li>
<li><p>Fixing a bug in Hydropower model where watershed aggregations would be incorrect
if a watershed is partially covering nodata raster values. Nodata values are now
ignored in zonal statistics. Numerical results change very slightly in the
case where a watershed only includes a few nodata pixels.</p></li>
<li><p>Adding TaskGraph functionality to GLOBIO model.</p></li>
<li><p>Adding some TaskGraph functionality to Scenario Generator: Proximity.</p></li>
<li><p>Fixing an issue with the InVEST Fisheries model that would prevent the model
from batch-processing a directory of population tables.  The model will now
process these files as expected.</p></li>
<li><p>Reimplementing Crop Production models using taskgraph.</p></li>
<li><p>Fixing an issue with Crop Production Regression’s result_table.csv where the
‘production_modeled’ and ‘&lt;nutrient&gt;_modeled’ values calculated for each crop
were done so using the same crop raster (e.g. wheat, soybean, and barley values
were all based on soybean data).</p></li>
<li><p>Hydropower subwatershed results now include all the same metrics as the
watershed results, with the exception of economic valuation metrics.</p></li>
<li><p>Reimplementing the Hydropower model using taskgraph.</p></li>
<li><p>Reimplementing the Carbon model using taskgraph.</p></li>
<li><p>Fixing an issue with Coastal Blue Carbon validation to allow column names to
ignore case.</p></li>
<li><p>Updating core carbon forest edge regression data coefficient to drop
impossible negative coefficients.</p></li>
<li><p>Fixing an issue with the Scenario Generator: Proximity model that would
raise an exception if no AOI were passed in even though the AOI is optional.</p></li>
<li><p>Removing Overlap Analysis and Overlap Analysis: Management Zones.</p></li>
<li><p>Removing Habitat Suitability.</p></li>
<li><p>Added comprehensive error checking to hydropower model to test for the VERY
common errors of missing biophysical, demand, and valuation coefficients in
their respective tables.</p></li>
<li><p>Fixing an issue with Hydropower Water Yield (“Annual Water Yield”) where
valuation would never be triggered when running the model through the User
Interface. And a related issue where the model would crash if a valuation table
was provided but a demand table was not. The UI no longer validates that config.</p></li>
<li><p>Fixing an issue with how logging is captured when a model is run through the
InVEST User Interface.  Now, logging from any thread started by the executor
thread will be written to the log file, which we expect to aid in debugging.</p></li>
<li><p>Fixing an issue with Scenic Quality where viewpoints outside of the AOI
were not being properly excluded.  Viewpoints are now excluded correctly.</p></li>
<li><p>The crop production model has been refactored to drop the “aggregate ID”
concept when summarizing results across an aggregate polygon. The model now
uses the polygon FIDs internally and externally when producing the result
summary table.</p></li>
<li><p>Correcting the rating instructions in the criteria rating instructions on how
the data quality (DQ) and weight should be rated in the HRA Preprocessor.
A DQ score of 1 should represent better data quality whereas the score of 3 is
worse data quality. A weight score of 1 is more important, whereas that of 3
is less important.</p></li>
<li><p>Fixing a case where a zero discount rate and rate of change in the carbon
model would cause a divide by zero error.</p></li>
</ul>
</div>
<div class="section" id="id13">
<h2>3.5.0 (2018-08-14)<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Bumped pygeoprocessing requirement to <code class="docutils literal notranslate"><span class="pre">pygeoprocessing&gt;=1.2.3</span></code>.</p></li>
<li><p>Bumped taskgraph requirement to <code class="docutils literal notranslate"><span class="pre">taskgraph&gt;=0.6.1</span></code>.</p></li>
<li><p>Reimplemented the InVEST Scenic Quality model.  This new version removes the
‘population’ and ‘overlap’ postprocessing steps, updates the available
valuation functions and greatly improves the runtime and memory-efficiency of
the model.  See the InVEST User’s Guide chapter for more information.</p></li>
<li><p>Updated Recreation server’s database to include metadata from photos taken
from 2005-2017 (previous range was 2005-2014). The new range is reflected
in the UI.</p></li>
<li><p>Fixed an issue with the InVEST binary build where binaries on Windows would
crash with an error saying Python27.dll could not be loaded.</p></li>
<li><p>Fixed an issue in the Rule-Based Scenario Generator UI where vector column
names from override and constraint layers were not being loaded.  This bug
caused the field ‘UNKNOWN’ to be passed to the model, causing an error.</p></li>
<li><p>Fixed an issue with the InVEST UI (all models), where attempting to
drag-and-drop a directory onto a model input would cause the application to
crash.</p></li>
<li><p>Coastal Vulnerability UI now specifies a number of reasonable defaults for
some numeric inputs.</p></li>
<li><p>Fixed an issue with the Fisheries UI where alpha and beta parameter inputs
were incorrectly disabled for the Ricker recruitment function.</p></li>
<li><p>InVEST now uses a Makefile to automate the build processes.  GNU Make is
required to use the Makefile.  See <code class="docutils literal notranslate"><span class="pre">README.rst</span></code> for instructions on
building InVEST.  This replaces the old <code class="docutils literal notranslate"><span class="pre">pavement.py</span></code> build entrypoint,
which has been removed.</p></li>
<li><p>Fixed an issue with the InVEST UI (all models), where attempting to
drag-and-drop a directory onto a model input would cause the application to
crash.</p></li>
<li><p>Fixed an issue with Forest Carbon Edge Effect where the UI layer was always
causing the model to run with only the aboveground carbon pool</p></li>
<li><p>Added functionality to the InVEST UI so that <code class="docutils literal notranslate"><span class="pre">Dropdown</span></code> inputs can now map
dropdown values to different output values.</p></li>
<li><p>Fixed an issue in the Crop Production Percentile model that would treat the
optional AOI vector field as a filename and crash on a run if it were empty.</p></li>
<li><p>Fixing an issue in the Pollination Model that would cause occasional crashes
due to a missing dependent task; it had previously been patched by setting
taskgraph to operate in single thread mode. This restores multithreading
in the pollination model.</p></li>
<li><p>Fixed an issue in the water yield / hydropower model that would skip
calculation of water demand tables when “water scarcity” was enabled.</p></li>
<li><p>Fixed an issue in the model data of the crop production model where some
crops were using incorrect climate bin rasters. Since the error was in the
data and not the code, users will need to download the most recent version
of InVEST’s crop model data during the installation step to get the fix.</p></li>
</ul>
</div>
<div class="section" id="id14">
<h2>3.4.4 (2018-03-26)<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>InVEST now requires GDAL 2.0.0 and has been tested up to GDAL 2.2.3. Any API users of InVEST will need to use GDAL version &gt;= 2.0. When upgrading GDAL we noticed slight numerical differences in our test suite in both numerical raster differences, geometry transforms, and occasionally a single pixel difference when using <cite>gdal.RasterizeLayer</cite>. Each of these differences in the InVEST test suite is within a reasonable numerical tolerance and we have updated our regression test suite appropriately. Users comparing runs between previous versions of InVEST may also notice reasonable numerical differences between runs.</p></li>
<li><p>Added a UI keyboard shortcut for showing documentation. On Mac OSX, this will be Command-?. On Windows, GNOME and KDE, this will be F1.</p></li>
<li><p>Patching an issue in NDR that was using the nitrogen subsurface retention efficiency for both nitrogen and phosphorous.</p></li>
<li><p>Fixed an issue with the Seasonal Water Yield model that incorrectly required a rain events table when the climate zone mode was in use.</p></li>
<li><p>Fixed a broken link to local and online user documentation from the Seasonal Water Yield model from the model’s user interface.</p></li>
</ul>
</div>
<div class="section" id="id15">
<h2>3.4.3 (2018-03-26)<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a critical issue in the carbon model UI that would incorrectly state the user needed a “REDD Priority Raster” when none was required.</p></li>
<li><p>Fixed an issue in annual water yield model that required subwatersheds even though it is an optional field.</p></li>
<li><p>Fixed an issue in wind energy UI that was incorrectly validating most of the inputs.</p></li>
</ul>
</div>
<div class="section" id="id16">
<h2>3.4.2 (2017-12-15)<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a cross-platform issue with the UI where logfiles could not be dropped onto UI windows.</p></li>
<li><p>Model arguments loaded from logfiles are now cast to their correct literal value.  This addresses an issue where some models containing boolean inputs could not have their parameters loaded from logfiles.</p></li>
<li><p>Fixed an issue where the Pollination Model’s UI required a farm polygon. It should have been optional and now it is.</p></li>
<li><p>Fixing an issue with the documentation and forums links on the InVEST model windows.  The links now correctly link to the documentation page or forums as needed.</p></li>
<li><p>Fixing an issue with the <code class="docutils literal notranslate"><span class="pre">FileSystemRunDialog</span></code> where pressing the ‘X’ button in the corner of the window would close the window, but not reset its state.  The window’s state is now reset whenever the window is closed (and the window cannot be closed when the model is running)</p></li>
</ul>
</div>
<div class="section" id="id17">
<h2>3.4.1 (2017-12-11)<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>In the Coastal Blue Carbon model, the <code class="docutils literal notranslate"><span class="pre">interest_rate</span></code> parameter has been renamed to <code class="docutils literal notranslate"><span class="pre">inflation_rate</span></code>.</p></li>
<li><p>Fixed issues with sample parameter sets for InVEST Habitat Quality, Habitat Risk Assessment, Coastal Blue Carbon, and Coastal Blue Carbon Preprocessors.  All sample parameter sets now have the correct paths to the model’s input files, and correctly note the name of the model that they apply to.</p></li>
<li><p>Added better error checking to the SDR model for missing <cite>ws_id</cite> and invalid <cite>ws_id</cite> values such as <cite>None</cite> or some non-integer value. Also added tests for the <cite>SDR</cite> validation module.</p></li>
</ul>
</div>
<div class="section" id="id18">
<h2>3.4.0 (2017-12-03)<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed an issue with most InVEST models where the suffix was not being reflected in the output filenames.  This was due to a bug in the InVEST UI, where the suffix args key was assumed to be <code class="docutils literal notranslate"><span class="pre">'suffix'</span></code>.  Instances of <code class="docutils literal notranslate"><span class="pre">InVESTModel</span></code> now accept a keyword argument to defined the suffix args key.</p></li>
<li><p>Fixed an issue/bug in Seasonal Water Yield that would occur when a user provided a datastack that had nodata values overlapping with valid DEM locations. Previously this would generate an NaN for various biophysical values at that pixel and cascade it downslope. Now any question of nodata on a valid DEM pixel is treated as “0”. This will make serious visual artifacts on the output, but should help users pinpoint the source of bad data rather than crash.</p></li>
<li><p>Refactored all but routing components of SDR to use PyGeoprocessing 0.5.0 and laid a consistent raster floating point type of ‘float32’. This will cause numerically insignificant differences between older versions of SDR and this one. But differences are well within the tolerance of the overall error of the model and expected error rate of data. Advantages are smaller disk footprint per run, cleaner and more maintainable design, and a slight performance increase.</p></li>
<li><p>Bug fixed in SDR that would align the output raster stack to match with the landcover pixel stack even though the rest of the rasters are scaled and clipped to the DEM.</p></li>
<li><p>When loading parameters from a datastack, parameter set or logfile, the UI will check that the model that created the file being loaded matches the name of the model that is currently running.  If there is a mismatch, a dialog is presented for the user to confirm or cancel the loading of parameters. Logfiles from IUI (which do not have clearly-recorded modelname or InVEST version information) can still have their arguments parsed, but the resulting model name and InVEST version will be set to <code class="docutils literal notranslate"><span class="pre">&quot;UNKNOWN&quot;</span></code>.</p></li>
<li><p>Data Stack files (<code class="docutils literal notranslate"><span class="pre">*.invest.json</span></code>, <code class="docutils literal notranslate"><span class="pre">*.invest.tar.gz</span></code>) can now be dragged and dropped on an InVEST model window, which will prompt the UI to load that parameter set.</p></li>
<li><p>Spatial inputs to Coastal Blue Carbon are now aligned as part of the model. This resolves a longstanding issue with the model where inputs would need to perfectly overlap (even down to pixel indices), or else the model would yield strange results.</p></li>
<li><p>The InVEST UI now contains a submenu for opening a recently-opened datastack.  This submenu is automatically populated with the 10 most recently-opened datastacks for the current model.</p></li>
<li><p>Removed vendored <code class="docutils literal notranslate"><span class="pre">natcap.invest.dbfpy</span></code> subpackage.</p></li>
<li><p>Removed deprecated <code class="docutils literal notranslate"><span class="pre">natcap.invest.fileio</span></code> module.</p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">natcap.invest.iui</span></code> UI subpackage in favor of a new UI framework found at <code class="docutils literal notranslate"><span class="pre">natcap.invest.ui</span></code>. This new UI features a greatly improved API, good test coverage, support for Qt4 and Qt5, and includes updates to all InVEST models to support validation of model arguments from a python script, independent of the UI.</p></li>
<li><p>Updated core model of seasonal water yield to allow for negative <cite>L_avail</cite>.</p></li>
<li><p>Updated RouteDEM to allow for file suffixes, finer control over what DEM routing algorithms to run, and removal of the multiple stepped stream threshold classification.</p></li>
<li><p>Redesign/refactor of pollination model. Long term bugs in the model are resolved, managed pollinators added, and many simplifications to the end user’s experience.  The updated user’s guide chapter is available here: <a class="reference external" href="http://data.naturalcapitalproject.org/nightly-build/invest-users-guide/html/croppollination.html">http://data.naturalcapitalproject.org/nightly-build/invest-users-guide/html/croppollination.html</a></p></li>
<li><p>Scenario Generator - Rule Based now has an optional input to define a seed.
This input is used to seed the random shuffling of parcels that have equal
priorities.</p></li>
<li><p>InVEST on mac is now distributed as a single application bundle, allowing InVEST to run as expected on mac OSX Sierra.  Individual models are selected and launched from a new launcher window.</p></li>
<li><p>The InVEST CLI now has a GUI model launcher:  <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">invest</span> <span class="pre">launcher</span></code></p></li>
<li><p>Updated the Coastal Blue Carbon model to improve handling of blank lines in input CSV tables and improve memory efficiency of the current implementation.</p></li>
<li><p>Improved the readability of a cryptic error message in Coastal Vulnerability that is normally raised when the depth threshold is too high or the exposure proportion is too low to detect any shoreline segments.</p></li>
<li><p>Adding InVEST HTML documentation to the Mac disk image distribution.</p></li>
<li><p>Upgrading dependency of PyGeoprocessing to 0.3.3.  This fixes a memory leak associated with any model that aggregates rasters over complicated overlapping polygons.</p></li>
<li><p>Adding sample data to Blue Carbon model that were missing.</p></li>
<li><p>Deprecating the InVEST Marine Water Quality model.  This also removes InVEST’s dependancy on the pyamg package which has been removed from REQUIREMENTS.TXT.</p></li>
<li><p>Deprecating the ArcGIS-based Coastal Protection model and ArcGIS-based data-preprocessing scripts.  The toolbox and scripts may still be found at <a class="reference external" href="https://bitbucket.org/natcap/invest.arcgis">https://bitbucket.org/natcap/invest.arcgis</a>.</p></li>
<li><p>Fixing an issue in the carbon edge effect model that caused output values in the shapefile to be rounded to the nearest integer.</p></li>
<li><p>Fixing issue in SDR model that would occasionally cause users to see errors about field widths in the output shapefile generation.</p></li>
<li><p>Updated the erodibility sample raster that ships with InVEST for the SDR model.  The old version was in US units, in this version we convert to SI units as the model requires, and clipped the raster to the extents of the other stack to save disk space.</p></li>
</ul>
</div>
<div class="section" id="id19">
<h2>3.3.3 (2017-02-06)<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed an issue in the UI where the carbon model wouldn’t accept negative numbers in the price increase of carbon.</p></li>
<li><p>RouteDEM no longer produces a “tiled_dem.tif” file since that functionality is being deprecated in PyGeoprocessing.</p></li>
<li><p>Fixing an issue in SDR where the optional drainage layer would not be used in most of the SDR biophysical calculations.</p></li>
<li><p>Refactoring so water yield pixels with Kc and et0 equal to be 0 now yields a 0.0 value of water yield on that pixel rather than nodata.</p></li>
<li><p>Light optimization refactor of wind energy model that improves runtimes in some cases by a factor of 2-3.</p></li>
<li><p>Performance optimizations to HRA that improve runtimes by approximately 30%.</p></li>
<li><p>Fixed a broken UI link to Seasonal Water Yield’s user’s guide.</p></li>
<li><p>Fixed an issue with DelineateIT that caused ArcGIS users to see both the watershed and inverse watershed polygons when viewing the output of the tool.</p></li>
<li><p>Upgrading dependency to PyGeoprocessing 0.3.2.</p></li>
<li><p>Fixed an issue with SDR that caused the LS factor to be an order of magnitue too high in areas where the slope was greater than 9%.  In our sample case this caused sediment export estimates to be about 6% too high, but in cases where analyses are run over steep slopes the error would have been greater.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">paver</span> <span class="pre">check</span></code> now warns if the <code class="docutils literal notranslate"><span class="pre">PYTHONHOME</span></code> environment variable is set.</p></li>
<li><p>API docs now correctly reflect installation steps needed for python development headers on linux.</p></li>
<li><p>Fixed a side effect in the InVEST user interface that would cause <code class="docutils literal notranslate"><span class="pre">tempfile.tempdir</span></code> to be set and then not be reset after a model run is finished.</p></li>
<li><p>The InVEST user interface will now record GDAL/OGR log messages in the log messages window and in the logfile written to the workspace.</p></li>
<li><p>Updated branding and usability of the InVEST installer for Windows, and the Mac Disk Image (.dmg).</p></li>
</ul>
</div>
<div class="section" id="id20">
<h2>3.3.2 (2016-10-17)<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Partial test coverage for HRA model.</p></li>
<li><p>Full test coverage for Overlap Analysis model.</p></li>
<li><p>Full test coverage for Finfish Aquaculture.</p></li>
<li><p>Full test coverage for DelineateIT.</p></li>
<li><p>Full test coverage for RouteDEM.</p></li>
<li><p>Fixed an issue in Habitat Quality where an error in the sample table or malformed threat raster names would display a confusing message to the user.</p></li>
<li><p>Full test coverage for scenario generator proximity model.</p></li>
<li><p>Patching an issue in seasonal water yield that causes an int overflow error if the user provides a floating point landcover map and the nodata value is outside of the range of an int64.</p></li>
<li><p>Full test coverage for the fisheries model.</p></li>
<li><p>Patched an issue that would cause the Seasonal Water Edge model to crash when the curve number was 100.</p></li>
<li><p>Patching a critical issue with forest carbon edge that would give incorrect results for edge distance effects.</p></li>
<li><p>Patching a minor issue with forest carbon edge that would cause the model to crash if only one  interpolation point were selected.</p></li>
<li><p>Full test coverage for pollination model.</p></li>
<li><p>Removed “farms aggregation” functionality from the InVEST pollination model.</p></li>
<li><p>Full test coverage for the marine water quality model.</p></li>
<li><p>Full test coverage for GLOBIO model.</p></li>
<li><p>Full test coverage for carbon forest edge model.</p></li>
<li><p>Upgraded SciPy dependancy to 0.16.1.</p></li>
<li><p>Patched bug in NDR that would cause a phosphorus density to be reported per pixel rather than total amount of phosporous in a pixel.</p></li>
<li><p>Corrected an issue with the uses of buffers in the euclidean risk function of Habitat Risk Assessment.  (issue #3564)</p></li>
<li><p>Complete code coverage tests for Habitat Quality model.</p></li>
<li><p>Corrected an issue with the <code class="docutils literal notranslate"><span class="pre">Fisheries_Inputs.csv</span></code> sample table used by Overlap Analysis.  (issue #3548)</p></li>
<li><p>Major modifications to Terrestrial Carbon model to include removing the harvested wood product pool, uncertainty analysis, and updated efficient raster calculations for performance.</p></li>
<li><p>Fixed an issue in GLOBIO that would cause model runs to crash if the AOI marked as optional was not present.</p></li>
<li><p>Removed the deprecated and incomplete Nearshore Wave and Erosion model (<code class="docutils literal notranslate"><span class="pre">natcap.invest.nearshore_wave_and_erosion</span></code>).</p></li>
<li><p>Removed the deprecated Timber model (<code class="docutils literal notranslate"><span class="pre">natcap.invest.timber</span></code>).</p></li>
<li><p>Fixed an issue where seasonal water yield would raise a divide by zero error if a watershed polygon didn’t cover a valid data region.  Now sets aggregation quantity to zero and reports a warning in the log.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">natcap.invest.utils.build_file_registry</span></code> now raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if a path is not a string or list of strings.</p></li>
<li><p>Fixed issues in NDR that would indicate invalid values were being processed during runtimes by skipping the invalid calculations in the first place rather than calculating them and discarding after the fact.</p></li>
<li><p>Complete code coverage tests for NDR model.</p></li>
<li><p>Minor (~10% speedup) performance improvements to NDR.</p></li>
<li><p>Added functionality to recreation model so that the <cite>monthly_table.csv</cite> file now receives a file suffix if one is provided by the user.</p></li>
<li><p>Fixed an issue in SDR where the m exponent was calculated incorrectly in many situations resulting in an error of about 1% in total export.</p></li>
<li><p>Fixed an issue in SDR that reported runtime overflow errors during normal processing even though the model completed without other errors.</p></li>
</ul>
</div>
<div class="section" id="id21">
<h2>3.3.1 (2016-06-13)<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Refactored API documentation for readability, organization by relevant topics, and to allow docs to build on <a class="reference external" href="http://invest.readthedocs.io">invest.readthedocs.io</a>,</p></li>
<li><p>Installation of <code class="docutils literal notranslate"><span class="pre">natcap.invest</span></code> now requires <code class="docutils literal notranslate"><span class="pre">natcap.versioner</span></code>.  If this is not available on the system at runtime, setuptools will make it available at runtime.</p></li>
<li><p>InVEST Windows installer now includes HISTORY.rst as the changelog instead of the old <code class="docutils literal notranslate"><span class="pre">InVEST_Updates_&lt;version&gt;</span></code> files.</p></li>
<li><dl class="simple">
<dt>Habitat suitability model is generalized and released as an API only accessible model.  It can be found at <code class="docutils literal notranslate"><span class="pre">natcap.invest.habitat_suitability.execute</span></code>.  This model replaces the oyster habitat suitability model.</dt><dd><ul>
<li><p>The refactor of this model requires an upgrade to <code class="docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">&gt;=</span> <span class="pre">1.11.0</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Fixed a crash in the InVEST CLI where calling <code class="docutils literal notranslate"><span class="pre">invest</span></code> without a parameter would raise an exception on linux-based systems.  (Issue <a class="reference external" href="https://bitbucket.org/natcap/invest/issues/3515">#3528</a>)</p></li>
<li><p>Patched an issue in Seasonal Water Yield model where a nodata value in the landcover map that was equal to <code class="docutils literal notranslate"><span class="pre">MAX_INT</span></code> would cause an overflow error/crash.</p></li>
<li><p>InVEST NSIS installer will now optionally install the Microsoft Visual C++ 2008 redistributable on Windows 7 or earlier.  This addresses a known issue on Windows 7 systems when importing GDAL binaries (Issue <a class="reference external" href="https://bitbucket.org/natcap/invest/issues/3515">#3515</a>).  Users opting to install this redistributable agree to abide by the terms and conditions therein.</p></li>
<li><p>Removed the deprecated subpackage <code class="docutils literal notranslate"><span class="pre">natcap.invest.optimization</span></code>.</p></li>
<li><p>Updated the InVEST license to legally define the Natural Capital Project.</p></li>
<li><p>Corrected an issue in Coastal Vulnerability where an output shapefile was being recreated for each row, and where field values were not being stored correctly.</p></li>
<li><p>Updated Scenario Generator model to add basic testing, file registry support, PEP8 and PEP257 compliance, and to fix several bugs.</p></li>
<li><p>Updated Crop Production model to add a simplified UI, faster runtime, and more testing.</p></li>
</ul>
</div>
<div class="section" id="id24">
<h2>3.3.0 (2016-03-14)<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Refactored Wind Energy model to use a CSV input for wind data instead of a Binary file.</p></li>
<li><dl class="simple">
<dt>Redesigned InVEST recreation model for a single input streamlined interface, advanced analytics, and refactored outputs.  While the model is still based on “photo user days” old model runs are not backward compatable with the new model or interface. See the Recreation Model user’s guide chapter for details.</dt><dd><ul>
<li><p>The refactor of this model requires an upgrade to <code class="docutils literal notranslate"><span class="pre">GDAL</span> <span class="pre">&gt;=1.11.0</span> <span class="pre">&lt;2.0</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">&gt;=</span> <span class="pre">1.10.2</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Removed nutrient retention (water purification) model from InVEST suite and replaced it with the nutrient delivery ratio (NDR) model.  NDR has been available in development relseases, but has now officially been added to the set of Windows Start Menu models and the “under development” tag in its users guide has been removed.  See the InVEST user’s guide for details between the differences and advantages of NDR over the old nutrient model.</p></li>
<li><p>Modified NDR by adding a required “Runoff Proxy” raster to the inputs.  This allows the model to vary the relative intensity of nutrient runoff based on varying precipitation variability.</p></li>
<li><p>Fixed a bug in the Area Change rule of the Rule-Based Scenario Generator, where units were being converted incorrectly. (Issue <a class="reference external" href="https://bitbucket.org/natcap/invest/issues/3472">#3472</a>) Thanks to Fosco Vesely for this fix.</p></li>
<li><p>InVEST Seasonal Water Yield model released.</p></li>
<li><p>InVEST Forest Carbon Edge Effect model released.</p></li>
<li><p>InVEST Scenario Generator: Proximity Based model released and renamed the previous “Scenario Generator” to “Scenario Generator: Rule Based”.</p></li>
<li><p>Implemented a blockwise exponential decay kernel generation function, which is now used in the Pollination and Habitat Quality models.</p></li>
<li><p>GLOBIO now uses an intensification parameter and not a map to average all agriculture across the GLOBIO 8 and 9 classes.</p></li>
<li><p>GLOBIO outputs modified so core outputs are in workspace and intermediate outputs are in a subdirectory called ‘intermediate_outputs’.</p></li>
<li><p>Fixed a crash with the NDR model that could occur if the DEM and landcover maps were different resolutions.</p></li>
<li><p>Refactored all the InVEST model user interfaces so that Workspace defaults to the user’s home “Documents” directory.</p></li>
<li><p>Fixed an HRA bug where stessors with a buffer of zero were being buffered by 1 pixel</p></li>
<li><p>HRA enhancement which creates a common raster to burn all input shapefiles onto, ensuring consistent alignment.</p></li>
<li><p>Fixed an issue in SDR model where a landcover map that was smaller than the DEM would create extraneous “0” valued cells.</p></li>
<li><p>New HRA feature which allows for “NA” values to be entered into the “Ratings” column for a habitat / stressor pair in the Criteria Ratings CSV. If ALL ratings are set to NA, the habitat / stressor will be treated as having no interaction. This means in the model, that there will be no overlap between the two sources. All rows parameters with an NA rating will not be used in calculating results.</p></li>
<li><p>Refactored Coastal Blue Carbon model for greater speed, maintainability and clearer documentation.</p></li>
<li><p>Habitat Quality bug fix when given land cover rasters with different pixel sizes than threat rasters. Model would use the wrong pixel distance for the convolution kernel.</p></li>
<li><p>Light refactor of Timber model. Now using CSV input attribute file instead of DBF file.</p></li>
<li><p>Fixed clipping bug in Wave Energy model that was not properly clipping polygons correctly. Found when using global data.</p></li>
<li><dl class="simple">
<dt>Made the following changes / updates to the coastal vulnerability model:</dt><dd><ul>
<li><p>Fixed a bug in the model where the geomorphology ranks were not always being used correctly.</p></li>
<li><p>Removed the HTML summary results output and replaced with a link to a dashboard that helps visualize and interpret CV results.</p></li>
<li><p>Added a point shapefile output: ‘outputs/coastal_exposure.shp’ that is a shapefile representation of the corresponding CSV table.</p></li>
<li><p>The model UI now requires the ‘Relief’ input. No longer optional.</p></li>
<li><p>CSV outputs and Shapefile outputs based on rasters now have x, y coorinates of the center of the pixel instead of top left of the pixel.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Turning setuptools’ zip_safe to False for consistency across the Natcap Namespace.</p></li>
<li><p>GLOBIO no longer requires user to specify a keyfield in the AOI.</p></li>
<li><p>New feature to GLOBIO to summarize MSA by AOI.</p></li>
<li><p>New feature to GLOBIO to use a user defined MSA parameter table to do the MSA thresholds for infrastructure, connectivity, and landuse type</p></li>
<li><p>Documentation to the GLOBIO code base including the large docstring for ‘execute’.</p></li>
</ul>
</div>
<div class="section" id="id26">
<h2>3.2.0 (2015-05-31)<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h2>
<p>InVEST 3.2.0 is a major release with the addition of several experimental models and tools as well as an upgrade to the PyGeoprocessing core:</p>
<ul class="simple">
<li><p>Upgrade to PyGeoprocessing v0.3.0a1 for miscelaneous performance improvements to InVEST’s core geoprocessing routines.</p></li>
<li><p>An alpha unstable build of the InVEST crop production model is released with partial documentation and sample data.</p></li>
<li><p>A beta build of the InVEST fisheries model is released with documentation and sample data.</p></li>
<li><p>An alpha unstable build of the nutrient delivery ratio (NDR) model is available directly under InVEST’s instalation directory at  <code class="docutils literal notranslate"><span class="pre">invest-x86/invest_ndr.exe</span></code>; eventually this model will replace InVEST’s current “Nutrient” model.  It is currently undocumented and unsupported but inputs are similar to that of InVEST’s SDR model.</p></li>
<li><p>An alpha unstable build of InVEST’s implementation of GLOBIO is available directly under InVEST’s instalation directory at <code class="docutils literal notranslate"><span class="pre">invest-x86/invest_globio.exe</span></code>.  It is currently undocumented but sample data are provided.</p></li>
<li><p>DelinateIT, a watershed delination tool based on PyGeoprocessing’s d-infinity flow algorithm is released as a standalone tool in the InVEST repository with documentation and sample data.</p></li>
<li><p>Miscelaneous performance patches and bug fixes.</p></li>
</ul>
</div>
<div class="section" id="id27">
<h2>3.1.3 (2015-04-23)<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<p>InVEST 3.1.3 is a hotfix release patching a memory blocking issue resolved in PyGeoprocessing version 0.2.1.  Users might have experienced slow runtimes on SDR or other routed models.</p>
</div>
<div class="section" id="id28">
<h2>3.1.2 (2015-04-15)<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h2>
<p>InVEST 3.1.2 is a minor release patching issues mostly related to the freshwater routing models and signed GDAL Byte datasets.</p>
<ul class="simple">
<li><p>Patching an issue where some projections were not regognized and InVEST reported an UnprojectedError.</p></li>
<li><p>Updates to logging that make it easier to capture logging messages when scripting InVEST.</p></li>
<li><p>Shortened water yield user interface height so it doesn’t waste whitespace.</p></li>
<li><p>Update PyGeoprocessing dependency to version 0.2.0.</p></li>
<li><p>Fixed an InVEST wide issue related to bugs stemming from the use of signed byte raster inputs that resulted in nonsensical outputs or KeyErrors.</p></li>
<li><p>Minor performance updates to carbon model.</p></li>
<li><p>Fixed an issue where DEMS with 32 bit ints and INT_MAX as the nodata value nodata value incorrectly treated the nodata value in the raster as a very large DEM value ultimately resulting in rasters that did not drain correctly and empty flow accumulation rasters.</p></li>
<li><p>Fixed an issue where some reservoirs whose edges were clipped to the edge of the watershed created large plateaus with no drain except off the edge of the defined raster.  Added a second pass in the plateau drainage algorithm to test for these cases and drains them to an adjacent nodata area if they occur.</p></li>
<li><p>Fixed an issue in the Fisheries model where the Results Suffix input was invariably initializing to an empty string.</p></li>
<li><p>Fixed an issue in the Blue Carbon model that prevented the report from being generated in the outputs file.</p></li>
</ul>
</div>
<div class="section" id="id29">
<h2>3.1.1 (2015-03-13)<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h2>
<p>InVEST 3.1.1 is a major performance and memory bug patch to the InVEST toolsuite.  We recommend all users upgrade to this version.</p>
<ul class="simple">
<li><p>Fixed an issue surrounding reports of SDR or Nutrient model outputs of zero values, nodata holes, excessive runtimes, or out of memory errors.  Some of those problems happened to be related to interesting DEMs that would break the flat drainage algorithm we have inside RouteDEM that adjusted the heights of those regions to drain away from higher edges and toward lower edges, and then pass the height adjusted dem to the InVEST model to do all its model specific calculations.  Unfortunately this solution was not amenable to some degenerate DEM cases and we have now adjusted the algorithm to treat each plateau in the DEM as its own separate region that is processed independently from the other regions. This decreases memory use so we never effectively run out of memory at a minor hit to overall runtime.  We also now adjust the flow direction directly instead of adjust the dem itself.  This saves us from having to modify the DEM and potentially get it into a state where a drained plateau would be higher than its original pixel neighbors that used to drain into it.</p></li>
</ul>
<p>There are side effects that result in sometimes large changes to un calibrated runs of SDR or nutrient.  These are related to slightly different flow directions across the landscape and a bug fix on the distance to stream calculation.</p>
<ul class="simple">
<li><p>InVEST geoprocessing now uses the PyGeoprocessing package (v0.1.4) rather than the built in functionality that used to be in InVEST.  This will not affect end users of InVEST but may be of interest to users who script InVEST calls who want a standalone Python processing package for raster stack math and hydrological routing.  The project is hosted at <a class="reference external" href="https://bitbucket.org/richpsharp/pygeoprocessing">https://bitbucket.org/richpsharp/pygeoprocessing</a>.</p></li>
<li><p>Fixed an marine water quality issue where users could input AOIs that were unprojected, but output pixel sizes were specified in meters.  Really the output pixel size should be in the units of the polygon and are now specified as such.  Additionally an exception is raised if the pixel size is too small to generate a numerical solution that is no longer a deep scipy error.</p></li>
<li><p>Added a suffix parameter to the timber and marine water quality models that append a user defined string to the output files; consistent with most of the other InVEST models.</p></li>
<li><p>Fixed a user interface issue where sometimes the InVEST model run would not open a windows explorer to the user’s workspace.  Instead it would open to C:User[..]My Documents.  This would often happen if there were spaces in the the workspace name or “/” characters in the path.</p></li>
<li><p>Fixed an error across all InVEST models where a specific combination of rasters of different cell sizes and alignments and unsigned data types could create errors in internal interpolation of the raster stacks.  Often these would appear as ‘KeyError: 0’ across a variety of contexts.  Usually the ‘0’ was an erroneous value introduced by a faulty interpolation scheme.</p></li>
<li><p>Fixed a MemoryError that could occur in the pollination and habitat quality models when the the base landcover map was large and the biophysical properties table allowed the effect to be on the order of that map.  Now can use any raster or range values with only a minor hit to runtime performance.</p></li>
<li><p>Fixed a serious bug in the plateau resolution algorithm that occurred on DEMs with large plateau areas greater than 10x10 in size.  The underlying 32 bit floating point value used to record small height offsets did not have a large enough precision to differentiate between some offsets thus creating an undefined flow direction and holes in the flow accumulation algorithm.</p></li>
<li><p>Minor performance improvements in the routing core, in some cases decreasing runtimes by 30%.</p></li>
<li><p>Fixed a minor issue in DEM resolution that occurred when a perfect plateau was encountered.  Rather that offset the height so the plateau would drain, it kept the plateau at the original height.  This occurred because the uphill offset was nonexistent so the algorithm assumed no plateau resolution was needed.  Perfect plateaus now drain correctly.  In practice this kind of DEM was encountered in areas with large bodies of water where the remote sensing algorithm would classify the center of a lake 1 meter higher than the rest of the lake.</p></li>
<li><p>Fixed a serious routing issue where divergent flow directions were not getting accumulated 50% of the time. Related to a division speed optimization that fell back on C-style modulus which differs from Python.</p></li>
<li><p>InVEST SDR model thresholded slopes in terms of radians, not percent thus clipping the slope tightly between 0.001 and 1%.  The model now only has a lower threshold of 0.00005% for the IC_0 factor, and no other thresholds.  We believe this was an artifact left over from an earlier design of the model.</p></li>
<li><p>Fixed a potential memory inefficiency in Wave Energy Model when computing the percentile rasters. Implemented a new memory efficient percentile algorithm and updated the outputs to reflect the new open source framework of the model. Now outputting csv files that describe the ranges and meaning of the percentile raster outputs.</p></li>
<li><p>Fixed a bug in Habitat Quality where the future output “quality_out_f.tif” was not reflecting the habitat value given in the sensitivity table for the specified landcover types.</p></li>
</ul>
</div>
<div class="section" id="id30">
<h2>3.1.0 (2014-11-19)<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h2>
<p>InVEST 3.1.0 (<a class="reference external" href="http://www.naturalcapitalproject.org/download.html">http://www.naturalcapitalproject.org/download.html</a>) is a major software and science milestone that includes an overhauled sedimentation model, long awaited fixes to exponential decay routines in habitat quality and pollination, and a massive update to the underlying hydrological routing routines.  The updated sediment model, called SDR (sediment delivery ratio), is part of our continuing effort to improve the science and capabilities of the InVEST tool suite.  The SDR model inputs are backwards comparable with the InVEST 3.0.1 sediment model with two additional global calibration parameters and removed the need for the retention efficiency parameter in the biophysical table; most users can run SDR directly with the data they have prepared for previous versions.  The biophysical differences between the models are described in a section within the SDR user’s guide and represent a superior representation of the hydrological connectivity of the watershed, biophysical parameters that are independent of cell size, and a more accurate representation of sediment retention on the landscape.  Other InVEST improvements to include standard bug fixes, performance improvements, and usability features which in part are described below:</p>
<ul class="simple">
<li><p>InVEST Sediment Model has been replaced with the InVEST Sediment Delivery Ratio model.  See the SDR user’s guide chapter for the difference between the two.</p></li>
<li><p>Fixed an issue in the pollination model where the exponential decay function decreased too quickly.</p></li>
<li><p>Fixed an issue in the habitat quality model where the exponential decay function decreased too quickly and added back linear decay as an option.</p></li>
<li><p>Fixed an InVEST wide issue where some input rasters that were signed bytes did not correctly map to their negative nodata values.</p></li>
<li><p>Hydropower input rasters have been normalized to the LULC size so sampling error is the same for all the input watersheds.</p></li>
<li><p>Adding a check to make sure that input biophysical parameters to the water yield model do not exceed invalid scientific ranges.</p></li>
<li><p>Added a check on nutrient retention in case the upstream water yield was less than 1 so that the log value did not go negative.  In that case we clamp upstream water yield to 0.</p></li>
<li><p>A KeyError issue in hydropower was resolved that occurred when the input rasters were at such a coarse resolution that at least one pixel was completely contained in each watershed.  Now a value of -9999 will be reported for watersheds that don’t contain any valid data.</p></li>
<li><p>An early version of the monthly water yield model that was erroneously included in was in the installer; it was removed in this version.</p></li>
<li><p>Python scripts necessary for running the ArcGIS version of Coastal Protection were missing.  They’ve since been added back to the distribution.</p></li>
<li><p>Raster calculations are now processed by raster block sizes.  Improvements in raster reads and writes.</p></li>
<li><p>Fixed an issue in the routing core where some wide DEMs would cause out of memory errors.</p></li>
<li><p>Scenario generator marked as stable.</p></li>
<li><p>Fixed bug in HRA where raster extents of shapefiles were not properly encapsulating the whole AOI.</p></li>
<li><p>Fixed bug in HRA where any number of habitats over 4 would compress the output plots. Now extends the figure so that all plots are correctly scaled.</p></li>
<li><p>Fixed a bug in HRA where the AOI attribute ‘name’ could not be an int. Should now accept any type.</p></li>
<li><p>Fixed bug in HRA which re-wrote the labels if it was run immediately without closing the UI.</p></li>
<li><p>Fixed nodata masking bug in Water Yield when raster extents were less than that covered by the watershed.</p></li>
<li><p>Removed hydropower calibration parameter form water yield model.</p></li>
<li><p>Models that had suffixes used to only allow alphanumeric characters.  Now all suffix types are allowed.</p></li>
<li><p>A bug in the core platform that would occasionally cause routing errors on irregularly pixel sized rasters was fixed.  This often had the effect that the user would see broken streams and/or nodata values scattered through sediment or nutrient results.</p></li>
<li><dl class="simple">
<dt>Wind Energy:</dt><dd><ul>
<li><p>Added new framework for valuation component. Can now input a yearly price table that spans the lifetime of the wind farm. Also if no price table is made, can specify a price for energy and an annual rate of change.</p></li>
<li><p>Added new memory efficient distance transform functionality</p></li>
<li><p>Added ability to leave out ‘landing points’ in ‘grid connection points’ input. If not landing points are found, it will calculate wind farm directly to grid point distances</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Error message added in Wave Energy if clip shape has no intersection</p></li>
<li><p>Fixed an issue where the data type of the nodata value in a raster might be different than the values in the raster.  This was common in the case of 64 bit floating point values as nodata when the underlying raster was 32 bit.  Now nodata values are cast to the underlying types which improves the reliability of many of the InVEST models.</p></li>
</ul>
</div>
<div class="section" id="id31">
<h2>3.0.1 (2014-05-19)<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Blue Carbon model released.</p></li>
<li><p>HRA UI now properly reflects that the Resolution of Analysis is in meters, not meters squared, and thus will be applied as a side length for a raster pixel.</p></li>
<li><p>HRA now accepts CSVs for ratings scoring that are semicolon separated as well as comma separated.</p></li>
<li><p>Fixed a minor bug in InVEST’s geoprocessing aggregate core that now consistently outputs correct zonal stats from the underlying pixel level hydro outputs which affects the water yield, sediment, and nutrient models.</p></li>
<li><p>Added compression to InVEST output geotiff files.  In most cases this reduces output disk usage by a factor of 5.</p></li>
<li><p>Fixed an issue where CSVs in the sediment model weren’t open in universal line read mode.</p></li>
<li><p>Fixed an issue where approximating whether pixel edges were the same size was not doing an approximately equal function.</p></li>
<li><p>Fixed an issue that made the CV model crash when the coastline computed from the landmass didn’t align perfectly with that defined in the geomorphology layer.</p></li>
<li><p>Fixed an issue in the CV model where the intensity of local wave exposure was very low, and yielded zero local wave power for the majority of coastal segments.</p></li>
<li><p>Fixed an issue where the CV model crashes if a coastal segment is at the edge of the shore exposure raster.</p></li>
<li><p>Fixed the exposure of segments surrounded by land that appeared as exposed when their depth was zero.</p></li>
<li><p>Fixed an issue in the CV model where the natural habitat values less than 5 were one unit too low, leading to negative habitat values in some cases.</p></li>
<li><p>Fixed an exponent issue in the CV model where the coastal vulnerability index was raised to a power that was too high.</p></li>
<li><p>Fixed a bug in the Scenic Quality model that prevented it from starting, as well as a number of other issues.</p></li>
<li><p>Updated the pollination model to conform with the latest InVEST geoprocessing standards, resulting in an approximately 33% speedup.</p></li>
<li><p>Improved the UI’s ability to remember the last folder visited, and to have all file and folder selection dialogs have access to this information.</p></li>
<li><p>Fixed an issue in Marine Water Quality where the UV points were supposed to be optional, but instead raised an exception when not passed in.</p></li>
</ul>
</div>
<div class="section" id="id32">
<h2>3.0.0 (2014-03-23)<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h2>
<p>The 3.0.0 release of InVEST represents a shift away from the ArcGIS to the InVEST standalone computational platform.  The only exception to this shift is the marine coastal protection tier 1 model which is still supported in an ArcGIS toolbox and has no InVEST 3.0 standalone at the moment.  Specific changes are detailed below</p>
<ul class="simple">
<li><p>A standalone version of the aesthetic quality model has been developed and packaged along with this release.  The standalone outperforms the ArcGIS equivalent and includes a valuation component.  See the user’s guide for details.</p></li>
<li><p>The core water routing algorithms for the sediment and nutrient models have been overhauled.  The routing algorithms now correctly adjust flow in plateau regions, address a bug that would sometimes not route large sections of a DEM, and has been optimized for both run time and memory performance.  In most cases the core d-infinity flow accumulation algorithm out performs TauDEM.  We have also packaged a simple interface to these algorithms in a standalone tool called RouteDEM; the functions can also be referenced from the scripting API in the invest_natcap.routing package.</p></li>
<li><p>The sediment and nutrient models are now at a production level release.  We no longer support the ArcGIS equivalent of these models.</p></li>
<li><p>The sediment model has had its outputs simplified with major changes including the removal of the ‘pixel mean’ outputs, a direct output of the pixel level export and retention maps, and a single output shapefile whose attribute table contains aggregations of sediment output values.  Additionally all inputs to the sediment biophysical table including p, c, and retention coefficients are now expressed as a proportion between 0 and 1; the ArcGIS model had previously required those inputs were integer values between 0 and 1000.  See the “Interpreting Results” section of sediment model for full details on the outputs.</p></li>
<li><p>The nutrient model has had a similar overhaul to the sediment model including a simplified output structure with many key outputs contained in the attribute table of the shapefile.  Retention coefficients are also expressed in proportions between 0 and 1.  See the “Interpreting Results” section of nutrient model for full details on the outputs.</p></li>
<li><p>Fixed a bug in Habitat Risk Assessment where the HRA module would incorrectly error if a criteria with a 0 score (meant to be removed from the assessment) had a 0 data quality or weight.</p></li>
<li><p>Fixed a bug in Habitat Risk Assessment where the average E/C/Risk values across the given subregion were evaluating to negative numbers.</p></li>
<li><p>Fixed a bug in Overlap Analysis where Human Use Hubs would error if run without inter-activity weighting, and Intra-Activity weighting would error if run without Human Use Hubs.</p></li>
<li><p>The runtime performance of the hydropower water yield model has been improved.</p></li>
<li><p>Released InVEST’s implementation of the D-infinity flow algorithm in a tool called RouteDEM available from the start menu.</p></li>
<li><p>Unstable version of blue carbon available.</p></li>
<li><p>Unstable version of scenario generator available.</p></li>
<li><p>Numerous other minor bug fixes and performance enhacnements.</p></li>
</ul>
</div>
<div class="section" id="id33">
<h2>2.6.0 (2013-12-16)<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h2>
<p>The 2.6.0 release of InVEST removes most of the old InVEST models from the Arc toolbox in favor of the new InVEST standalone models.  While we have been developing standalone equivalents for the InVEST Arc models since version 2.3.0, this is the first release in which we removed support for the deprecated ArcGIS versions after an internal review of correctness, performance, and stability on the standalones.  Additionally, this is one of the last milestones before the InVEST 3.0.0 release later next year which will transition InVEST models away from strict ArcGIS dependence to a standalone form.</p>
<p>Specifically, support for the following models have been moved from the ArcGIS toolbox to their Windows based standalones: (1) hydropower/water yield, (2) finfish aquaculture, (3) coastal protection tier 0/coastal vulnerability, (4) wave energy, (5) carbon, (6) habitat quality/biodiversity, (7) pollination, (8) timber, and (9) overlap analysis.  Additionally, documentation references to ArcGIS for those models have been replaced with instructions for launching standalone InVEST models from the Windows start menu.</p>
<p>This release also addresses minor bugs, documentation updates, performance tweaks, and new functionality to the toolset, including:</p>
<ul class="simple">
<li><p>A Google doc to provide guidance for scripting the InVEST standalone models: <a class="reference external" href="https://docs.google.com/document/d/158WKiSHQ3dBX9C3Kc99HUBic0nzZ3MqW3CmwQgvAqGo/edit?usp=sharing">https://docs.google.com/document/d/158WKiSHQ3dBX9C3Kc99HUBic0nzZ3MqW3CmwQgvAqGo/edit?usp=sharing</a></p></li>
<li><p>Fixed a bug in the sample data that defined Kc as a number between 0 and 1000 instead of a number between 0 and 1.</p></li>
<li><p>Link to report an issue now takes user to the online forums rather than an email address.</p></li>
<li><p>Changed InVEST Sediment model standalone so that retention values are now between 0 and 1 instead of 0 and 100.</p></li>
<li><p>Fixed a bug in Biodiversity where if no suffix were entered output filenames would have a trailing underscore (_) behind them.</p></li>
<li><p>Added documentation to the water purification/nutrient retention model documentation about the standalone outputs since they differ from the ArcGIS version of the model.</p></li>
<li><p>Fixed an issue where the model would try to move the logfile to the workspace after the model run was complete and Windows would erroneously report that the move failed.</p></li>
<li><p>Removed the separation between marine and freshwater terrestrial models in the user’s guide.  Now just a list of models.</p></li>
<li><p>Changed the name of InVEST “Biodiversity” model to “Habitat Quality” in the module names, start menu, user’s guide, and sample data folders.</p></li>
<li><p>Minor bug fixes, performance enhancements, and better error reporting in the internal infrastructure.</p></li>
<li><p>HRA risk in the unstable standalone is calculated differently from the last release. If there is no spatial overlap within a cell, there is automatically a risk of 0. This also applies to the E and C intermediate files for a given pairing. If there is no spatial overlap, E and C will be 0 where there is only habitat. However, we still create a recovery potential raster which has habitat- specific risk values, even without spatial overlap of a stressor. HRA shapefile outputs for high, medium, low risk areas are now calculated using a user-defined maximum number of overlapping stressors, rather than all potential stressors. In the HTML subregion averaged output, we now attribute what portion of risk to a habitat comes from each habitat-stressor pairing. Any pairings which don’t overlap will have an automatic risk of 0.</p></li>
<li><p>Major changes to Water Yield : Reservoir Hydropower Production. Changes include an alternative equation for calculating Actual Evapotranspiration (AET) for non-vegetated land cover types including wetlands. This allows for a more accurate representation of processes on land covers such as urban, water, wetlands, where root depth values aren’t applicable. To differentiate between the two equations a column ‘LULC_veg’ has been added to the Biophysical table in Hydropower/input/biophysical_table.csv. In this column a 1 indicates vegetated and 0 indicates non-vegetated.</p></li>
<li><p>The output structure and outputs have also change in Water Yield : Reservoir Hydropower Production. There is now a folder ‘output’ that contains all output files including a sub directory ‘per_pixel’ which has three pixel raster outputs. The subwatershed results are only calculated for the water yield portion and those results can be found as a shapefile, ‘subwatershed_results.shp’, and CSV file, ‘subwatershed_results.csv’. The watershed results can be found in similar files: watershed_results.shp and watershed_results.csv. These two files for the watershed outputs will aggregate the Scarcity and Valuation results as well.</p></li>
<li><p>The evapotranspiration coefficients for crops, Kc, has been changed to a decimal input value in the biophysical table. These values used to be multiplied by 1000 so that they were in integer format, that pre processing step is no longer necessary.</p></li>
<li><p>Changing support from <a class="reference external" href="mailto:richsharp&#37;&#52;&#48;stanford&#46;edu">richsharp<span>&#64;</span>stanford<span>&#46;</span>edu</a> to the user support forums at <a class="reference external" href="http://ncp-yamato.stanford.edu/natcapforums">http://ncp-yamato.stanford.edu/natcapforums</a>.</p></li>
</ul>
</div>
<div class="section" id="id34">
<h2>2.5.6 (2013-09-06)<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h2>
<p>The 2.5.6 release of InVEST that addresses minor bugs, performance
tweaks, and new functionality of the InVEST standalone models.
Including:</p>
<ul class="simple">
<li><p>Change the changed the Carbon biophysical table to use code field
name from LULC to lucode so it is consistent with the InVEST water
yield biophysical table.</p></li>
<li><p>Added Monte Carlo uncertainty analysis and documentation to finfish
aquaculture model.</p></li>
<li><p>Replaced sample data in overlap analysis that was causing the model
to crash.</p></li>
<li><p>Updates to the overlap analysis user’s guide.</p></li>
<li><p>Added preprocessing toolkit available under
C:{InVEST install directory}utils</p></li>
<li><p>Biodiversity Model now exits gracefully if a threat raster is not
found in the input folder.</p></li>
<li><p>Wind Energy now uses linear (bilinear because its over 2D space?)
interpolation.</p></li>
<li><p>Wind Energy has been refactored to current API.</p></li>
<li><p>Potential Evapotranspiration input has been properly named to
Reference Evapotranspiration.</p></li>
<li><p>PET_mn for Water Yield is now Ref Evapotranspiration times Kc
(evapotranspiration coefficient).</p></li>
<li><p>The soil depth field has been renamed ‘depth to root restricting
layer’ in both the hydropower and nutrient retention models.</p></li>
<li><p>ETK column in biophysical table for Water Yield is now Kc.</p></li>
<li><p>Added help text to Timber model.</p></li>
<li><p>Changed the behavior of nutrient retention to return nodata values
when the mean runoff index is zero.</p></li>
<li><p>Fixed an issue where the hydropower model didn’t use the suffix
inputs.</p></li>
<li><p>Fixed a bug in Biodiversity that did not allow for numerals in the
threat names and rasters.</p></li>
<li><p>Updated routing algorithm to use a modern algorithm for plateau
direction resolution.</p></li>
<li><p>Fixed an issue in HRA where individual risk pixels weren’t being
calculated correctly.</p></li>
<li><p>HRA will now properly detect in the preprocessed CSVs when criteria
or entire habitat-stressor pairs are not desired within an
assessment.</p></li>
<li><p>Added an infrastructure feature so that temporary files are created
in the user’s workspace rather than at the system level
folder. Â This lets users work in a secondary workspace on a USB
attached hard drive and use the space of that drive, rather than the
primary operating system drive.</p></li>
</ul>
</div>
<div class="section" id="id35">
<h2>2.5.5 (2013-08-06)<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<p>The 2.5.5 release of InVEST that addresses minor bugs, performance
tweaks, and new functionality of the InVEST standalone models.  Including:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Production level release of the 3.0 Coastal Vulnerability model.</dt><dd><ul>
<li><p>This upgrades the InVEST 2.5.4 version of the beta standalone CV
to a full release with full users guide.  This version of the
CV model should be used in all cases over its ArcGIS equivalent.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Production level release of the Habitat Risk Assessment model.</dt><dd><ul>
<li><p>This release upgrades the InVEST 2.5.4 beta version of the
standalone habitat risk assessment model. It should be used in
all cases over its ArcGIS equivalent.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Uncertainty analysis in Carbon model (beta)</dt><dd><ul>
<li><p>Added functionality to assess uncertainty in sequestration and
emissions given known uncertainty in carbon pool stocks.  Users
can now specify standard  deviations of carbon pools with
normal distributions as well as desired uncertainty levels.
New outputs include masks for regions which both sequester and
emit carbon with a high probability of confidence.  Please see
the “Uncertainty Analysis” section of the carbon user’s guide
chapter for more information.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>REDD+ Scenario Analysis in Carbon model (beta)</dt><dd><ul>
<li><p>Additional functionality to assist users evaluating REDD
and REDD+ scenarios in the carbon model.  The uncertainty analysis
functionality can also be used with these scenarios.
Please see the “REDD Scenario Analysis” section of the
carbon user’s guide chapter for more information.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Uncertainty analysis in Finfish Aquaculture model (beta)</dt><dd><ul>
<li><p>Additionally functionality to account for uncertainty in
alpha and beta growth parameters as well as histogram
plots showing the distribution of harvest weights and
net present value.   Uncertainty analysis is performed
through Monte Carlo runs that normally sample the
growth parameters.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Streamlined Nutrient Retention model functionality</dt><dd><ul>
<li><p>The nutrient retention module no longer requires users to explicitly
run the water yield model.  The model now seamlessly runs water yield
during execution.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Beta release of the recreation model</dt><dd><ul>
<li><p>The recreation is available for beta use with limited documentation.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Full release of the wind energy model</dt><dd><ul>
<li><p>Removing the ‘beta’ designation on the wind energy model.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Known Issues:</p>
<blockquote>
<div><ul class="simple">
<li><p>Flow routing in the standalone sediment and nutrient models has a
bug that prevents routing in some (not all) landscapes.  This bug is
related to resolving d-infinity flow directions across flat areas.
We are implementing the solution in Garbrecht and Martx (1997).
In the meanwhile the sediment and nutrient models are still marked
as beta until this issue is resolved.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id36">
<h2>2.5.4 (2013-06-07)<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h2>
<p>This is a minor release of InVEST that addresses numerous minor bugs and performance tweaks in the InVEST 3.0 models.  Including:</p>
<blockquote>
<div><ul>
<li><dl class="simple">
<dt>Refactor of Wave Energy Model:</dt><dd><ul class="simple">
<li><p>Combining the Biophysical and Valuation modules into one.</p></li>
<li><p>Adding new data for the North Sea and Australia</p></li>
<li><p>Fixed a bug where elevation values that were equal to or greater than zero
were being used in calculations.</p></li>
<li><p>Fixed memory issues when dealing with large datasets.</p></li>
<li><p>Updated core functions to remove any use of depracated functions</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Performance updates to the carbon model.</p></li>
<li><dl class="simple">
<dt>Nodata masking fix for rarity raster in Biodiversity Model.</dt><dd><ul class="simple">
<li><p>When computing rarity from a base landuse raster and current or future
landuse raster, the intersection of the two was not being properly taken.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Fixes to the flow routing algorithms in the sediment and nutrient
retention models in cases where stream layers were burned in by ArcGIS
hydro tools.  In those cases streams were at the same elevation and caused
routing issues.</p></li>
<li><p>Fixed an issue that affected several InVEST models that occured
when watershed polygons were too small to cover a pixel.  Excessively
small watersheds are now handled correctly</p></li>
<li><p>Arc model deprecation.  We are deprecating the following ArcGIS versions
of our InVEST models in the sense we recommend ALL users use the InVEST
standalones over the ArcGIS versions, and the existing ArcGIS versions
of these models will be removed entirely in the next release.</p>
<blockquote>
<div><ul class="simple">
<li><p>Timber</p></li>
<li><p>Carbon</p></li>
<li><p>Pollination</p></li>
<li><p>Biodiversity</p></li>
<li><p>Finfish Aquaculture</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Known Issues:</p>
<blockquote>
<div><ul class="simple">
<li><p>Flow routing in the standalone sediment and nutrient models has a
bug that prevents routing in several landscapes.  We’re not
certain of the nature of the bug at the moment, but we will fix by
the next release.  Thus, sediment and nutrient models are marked
as (beta) since in some cases the DEM routes correctly.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id37">
<h2>2.5.3 (2013-03-21)<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h2>
<p>This is a minor release of InVEST that fixes an issue with the HRA model that caused ArcGIS versions of the model to fail when calculating habitat maps for risk hotspots. This upgrade is strongly recommended for users of InVEST 2.5.1 or 2.5.2.</p>
</div>
<div class="section" id="id38">
<h2>2.5.2 (2013-03-17)<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h2>
<p>This is a minor release of InVEST that fixes an issue with the HRA sample data that caused ArcGIS versions of the model to fail on the training data.  There is no need to upgrade for most users unless you are doing InVEST training.</p>
</div>
<div class="section" id="id39">
<h2>2.5.1 (2013-03-12)<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h2>
<p>This is a minor release of InVEST that does not add any new models, but
does add additional functionality, stability, and increased performance to
one of the InVEST 3.0 standalones:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Pollination 3.0 Beta:</dt><dd><ul>
<li><p>Fixed a bug where Windows users of InVEST could run the model, but
most raster outputs were filled with nodata values.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Additionally, this minor release fixes a bug in the InVEST user interface where
collapsible containers became entirely non-interactive.</p>
</div>
<div class="section" id="id40">
<h2>2.5.0 (2013-03-08)<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h2>
<p>This a major release of InVEST that includes new standalone versions (ArcGIS
is not required) our models as well as additional functionality, stability,
and increased performance to many of the existing models.  This release is
timed to support our group’s annual training event at Stanford University.
We expect to release InVEST 2.5.1 a couple of weeks after to address any
software issues that arise during the training.  See the release notes
below for details of the release, and please contact <a class="reference external" href="mailto:richsharp&#37;&#52;&#48;stanford&#46;edu">richsharp<span>&#64;</span>stanford<span>&#46;</span>edu</a>
for any issues relating to software:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><em>new</em> Sediment 3.0 Beta:</dt><dd><ul>
<li><p>This is a standalone model that executes an order of magnitude faster
than the original ArcGIS model, but may have memory issues with
larger datasets. This fix is scheduled for the 2.5.1 release of InVEST.</p></li>
<li><p>Uses a d-infinity flow algorithm (ArcGIS version uses D8).</p></li>
<li><p>Includes a more accurate LS factor.</p></li>
<li><p>Outputs are now summarized by polygon rather than rasterized polygons.
Users can view results directly as a table rather than sampling a
GIS raster.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>new</em> Nutrient 3.0 Beta:</dt><dd><ul>
<li><p>This is a standalone model that executes an order of magnitude faster
than the original ArcGIS model, but may have memory issues with
larger datasets. This fix is scheduled for the 2.5.1 release of InVEST.</p></li>
<li><p>Uses a d-infinity flow algorithm (ArcGIS version uses D8).</p></li>
<li><p>Includes a more accurate LS factor.</p></li>
<li><p>Outputs are now summarized by polygon rather than rasterized polygons.
Users can view results directly as a table rather than sampling a
GIS raster.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>new</em> Wind Energy:</dt><dd><ul>
<li><p>A new offshore wind energy model.  This is a standalone-only model
available under the windows start menu.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>new</em> Recreation Alpha:</dt><dd><ul>
<li><p>This is a working demo of our soon to be released future land and near
shore recreation model.  The model itself is incomplete and should only
be used as a demo or by NatCap partners that know what they’re doing.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>new</em> Habitat Risk Assessment 3.0 Alpha:</dt><dd><ul>
<li><p>This is a working demo of our soon to be released 3.0 version of habitat
risk assessment.  The model itself is incomplete and should only
be used as a demo or by NatCap partners that know what they’re doing.
Users that need to use the habitat risk assessment should use the
ArcGIS version of this model.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Improvements to the InVEST 2.x ArcGIS-based toolset:</dt><dd><ul>
<li><p>Bug fixes to the ArcGIS based Coastal Protection toolset.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Removed support for the ArcGIS invest_VERSION.mxd map.  We expect to
transition the InVEST toolset exclusive standalone tools in a few months.  In
preparation of this we are starting to deprecate parts of our old ArcGIS
toolset including this ArcMap document.  The InVEST ArcToolbox is still
available in C:InVEST_2_5_0invest_250.tbx.</p></li>
<li><p>Known issues:</p>
<ul>
<li><p>The InVEST 3.0 standalones generate open source GeoTiffs as
outputs rather than the proprietary ESRI Grid format.  ArcGIS 9.3.1
occasionally displays these rasters incorrectly.  We have found
that these layers can be visualized in ArcGIS 9.3.1 by following
convoluted steps: Right Click on the layer and select Properties; click on
the Symbology tab; select Stretch, agree to calculate a histogram (this will
create an .aux file that Arc can use for visualization), click “Ok”, remove
the raster from the layer list, then add it back. As an alternative, we
suggest using an open source GIS Desktop Tool like Quantum GIS or ArcGIS
version 10.0 or greater.</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>The InVEST 3.0 carbon model will generate inaccurate sequestration results
if the extents of the current and future maps don’t align.  This will be
fixed in InVEST 2.5.1; in the meanwhile a workaround is to clip both LULCs
so they have identical overlaps.</p></li>
<li><p>A user reported an unstable run of InVEST 3.0 water yield.  We are not
certain what is causing the issue, but we do have a fix that will go out
in InVEST 2.5.1.</p></li>
<li><p>At the moment the InVEST standalones do not run on Windows XP.  This appears
to be related to an incompatibility between Windows XP and GDAL, the an open
source gis library we use to create and read GIS data.  At the moment we are
uncertain if we will be able to fix this bug in future releases, but will
pass along more information in the future.</p></li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id41">
<h2>2.4.5 (2013-02-01)<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h2>
<p>This is a minor release of InVEST that does not add any new models, but
does add additional functionality, stability, and increased performance to
many of the InVEST 3.0 standalones:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Pollination 3.0 Beta:</dt><dd><ul>
<li><p>Greatly improved memory efficiency over previous versions of this model.</p></li>
<li><p>3.0 Beta Pollination Biophysical and Valuation have been merged into a
single tool, run through a unified user interface.</p></li>
<li><p>Slightly improved runtime through the use of newer core InVEST GIS libraries.</p></li>
<li><p>Optional ability to weight different species individually.  This feature
adds a column to the Guilds table that allows the user to specify a
relative weight for each species, which will be used before combining all
species supply rasters.</p></li>
<li><p>Optional ability to aggregate pollinator abundances at specific points
provided by an optional points shapefile input.</p></li>
<li><p>Bugfix: non-agricultural pixels are set to a value of 0.0 to indicate no
value on the farm value output raster.</p></li>
<li><p>Bugfix: sup_val_&lt;beename&gt;_&lt;scenario&gt;.tif rasters are now saved to the
intermediate folder inside the user’s workspace instead of the output
folder.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Carbon Biophysical 3.0 Beta:</dt><dd><ul>
<li><p>Tweaked the user interface to require the user to
provide a future LULC raster when the ‘Calculate Sequestration’ checkbox
is checked.</p></li>
<li><p>Fixed a bug that restricted naming of harvest layers.  Harvest layers are
now selected simply by taking the first available layer.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Better memory efficiency in hydropower model.</p></li>
<li><p>Better support for unicode filepaths in all 3.0 Beta user interfaces.</p></li>
<li><p>Improved state saving and retrieval when loading up previous-run parameters
in all 3.0 Beta user interfaces.</p></li>
<li><p>All 3.0 Beta tools now report elapsed time on completion of a model.</p></li>
<li><p>All 3.0 Beta tools now provide disk space usage reports on completion of a
model.</p></li>
<li><p>All 3.0 Beta tools now report arguments at the top of each logfile.</p></li>
<li><p>Biodiversity 3.0 Beta: The half-saturation constant is now allowed to be a
positive floating-point number.</p></li>
<li><p>Timber 3.0 Beta: Validation has been added to the user interface for this
tool for all tabular and shapefile inputs.</p></li>
<li><p>Fixed some typos in Equation 1 in the Finfish Aquaculture user’s guide.</p></li>
<li><p>Fixed a bug where start menu items were not getting deleted during an InVEST
uninstall.</p></li>
<li><p>Added a feature so that if the user selects to download datasets but the
datasets don’t successfully download the installation alerts the user and
continues normally.</p></li>
<li><p>Fixed a typo with tau in aquaculture guide, originally said 0.8, really 0.08.</p></li>
<li><dl class="simple">
<dt>Improvements to the InVEST 2.x ArcGIS-based toolset:</dt><dd><ul>
<li><p>Minor bugfix to Coastal Vulnerability, where an internal unit of
measurements was off by a couple digits in the Fetch Calculator.</p></li>
<li><p>Minor fixes to various helper tools used in InVEST 2.x models.</p></li>
<li><p>Outputs for Hargreaves are now saved as geoTIFFs.</p></li>
<li><p>Thornwaite allows more flexible entering of hours of sunlight.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id42">
<h2>2.4.4 (2012-10-24)<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixes memory errors experienced by some users in the Carbon Valuation 3.0 Beta model.</p></li>
<li><p>Minor improvements to logging in the InVEST User Interface</p></li>
<li><p>Fixes an issue importing packages for some officially-unreleased InVEST models.</p></li>
</ul>
</div>
<div class="section" id="id43">
<h2>2.4.3 (2012-10-19)<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a minor issue with hydropower output vaulation rasters whose statistics were not pre-calculated.  This would cause the range in ArcGIS to show ther rasters at -3e38 to 3e38.</p></li>
<li><p>The InVEST installer now saves a log of the installation process to InVEST_&lt;version&gt;install_log.txt</p></li>
<li><p>Fixed an issue with Carbon 3.0 where carbon output values were incorrectly calculated.</p></li>
<li><p>Added a feature to Carbon 3.0 were total carbon stored and sequestered is output as part of the running log.</p></li>
<li><p>Fixed an issue in Carbon 3.0 that would occur when users had text representations of floating point numbers in the carbon pool dbf input file.</p></li>
<li><p>Added a feature to all InVEST 3.0 models to list disk usage before and after each run and in most cases report a low free space error if relevant.</p></li>
</ul>
</div>
<div class="section" id="id44">
<h2>2.4.2 (2012-10-15)<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed an issue with the ArcMap document where the paths to default data were not saved as relative paths.  This caused the default data in the document to not be found by ArcGIS.</p></li>
<li><p>Introduced some more memory-efficient processing for Biodiversity 3.0 Beta.  This fixes an out-of-memory issue encountered by some users when using very large raster datasets as inputs.</p></li>
</ul>
</div>
<div class="section" id="id45">
<h2>2.4.1 (2012-10-08)<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a compatibility issue with ArcGIS 9.3 where the ArcMap and ArcToolbox were unable to be opened by Arc 9.3.</p></li>
</ul>
</div>
<div class="section" id="id46">
<h2>2.4.0 (2012-10-05)<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h2>
<p>Changes in InVEST 2.4.0</p>
<p>General:</p>
<p>This is a major release which releases two additional beta versions of the
InVEST models in the InVEST 3.0 framework.  Additionally, this release
introduces start menu shortcuts for all available InVEST 3.0 beta models.
Existing InVEST 2.x models can still be found in the included Arc toolbox.</p>
<p>Existing InVEST models migrated to the 3.0 framework in this release
include:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Biodiversity 3.0 Beta</dt><dd><ul>
<li><p>Minor bug fixes and usability enhancements</p></li>
<li><p>Runtime decreased by a factor of 210</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Overlap Analysis 3.0 Beta</dt><dd><ul>
<li><p>In most cases runtime decreased by at least a factor of 15</p></li>
<li><p>Minor bug fixes and usability enhancements</p></li>
<li><dl class="simple">
<dt>Split into two separate tools:</dt><dd><ul>
<li><p>Overlap Analysis outputs rasters with individually-weighted pixels</p></li>
<li><p>Overlap Analysis: Management Zones produces a shapefile output.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Updated table format for input activity CSVs</p></li>
<li><p>Removed the “grid the seascape” step</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Updates to ArcGIS models:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Coastal vulnerability</dt><dd><ul>
<li><p>Removed the “structures” option</p></li>
<li><p>Minor bug fixes and usability enhancements</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Coastal protection (erosion protection)</dt><dd><ul>
<li><p>Incorporated economic valuation option</p></li>
<li><p>Minor bug fixes and usability enhancements</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Additionally there are a handful of minor fixes and feature
enhancements:</p>
<ul class="simple">
<li><p>InVEST 3.0 Beta standalones (identified by a new InVEST icon) may be run
from the Start Menu (on windows navigate to
Start Menu -&gt; All Programs -&gt; InVEST 2.4.0</p></li>
<li><p>Bug fixes for the calculation of raster statistics.</p></li>
<li><p>InVEST 3.0 wave energy no longer requires an AOI for global runs, but
encounters memory issues on machines with less than 4GB of RAM.  This
is a known issue that will be fixed in a minor release.</p></li>
<li><p>Minor fixes to several chapters in the user’s guide.</p></li>
<li><p>Minor bug fix to the 3.0 Carbon model: harvest maps are no longer required
inputs.</p></li>
<li><p>Other minor bug fixes and runtime performance tweaks in the 3.0 framework.</p></li>
<li><p>Improved installer allows users to remove InVEST from the Windows Add/Remove
programs menu.</p></li>
<li><p>Fixed a visualization bug with wave energy where output rasters did not have the min/max/stdev calculations on them.  This made the default visualization in arc be a gray blob.</p></li>
</ul>
</div>
<div class="section" id="id47">
<h2>2.3.0 (2012-08-02)<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h2>
<p>Changes in InVEST 2.3.0</p>
<p>General:</p>
<p>This is a major release which releases several beta versions of the
InVEST models in the InVEST 3.0 framework.  These models run as
standalones, but a GIS platform is needed to edit and view the data
inputs and outputs.  Until InVEST 3.0 is released the original ArcGIS
based versions of these tools will remain the release.</p>
<p>Existing InVEST models migrated to the 3.0 framework in this release
include:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Reservoir Hydropower Production 3.0 beta</dt><dd><ul>
<li><p>Minor bug fixes.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Finfish Aquaculture</dt><dd><ul>
<li><p>Minor bug fixes and usability enhancements.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Wave Energy 3.0 beta</dt><dd><ul>
<li><p>Runtimes for non-global runs decreased by a factor of 7</p></li>
<li><p>Minor bugs in interpolation that exist in the 2.x model is fixed in
3.0 beta.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Crop Pollination 3.0 beta</dt><dd><ul>
<li><p>Runtimes decreased by a factor of over 10,000</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>This release also includes the new models which only exist in the 3.0
framework:</p>
<ul class="simple">
<li><p>Marine Water Quality 3.0 alpha with a preliminary  user’s guide.</p></li>
</ul>
<p>InVEST models in the 3.0 framework from previous releases that now
have a standalone executable include:</p>
<ul class="simple">
<li><p>Managed Timber Production Model</p></li>
<li><p>Carbon Storage and Sequestration</p></li>
</ul>
<p>Additionally there are a handful of other minor fixes and feature
enhancements since the previous release:</p>
<ul class="simple">
<li><p>Minor bug fix to 2.x sedimentation model that now correctly
calculates slope exponentials.</p></li>
<li><p>Minor fixes to several chapters in the user’s guide.</p></li>
<li><p>The 3.0 version of the Carbon model now can value the price of carbon
in metric tons of C or CO2.</p></li>
<li><p>Other minor bug fixes and runtime performance tweaks in the 3.0 framework.</p></li>
</ul>
</div>
<div class="section" id="id48">
<h2>2.2.2 (2012-03-03)<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h2>
<p>Changes in InVEST 2.2.2</p>
<p>General:</p>
<p>This is a minor release which fixes the following defects:</p>
<dl class="simple">
<dt>-Fixed an issue with sediment retention model where large watersheds</dt><dd><p>allowed loading per cell was incorrectly rounded to integer values.</p>
</dd>
<dt>-Fixed bug where changing the threshold didn’t affect the retention output</dt><dd><p>because function was incorrectly rounded to integer values.</p>
</dd>
</dl>
<p>-Added total water yield in meters cubed to to output table by watershed.</p>
<dl class="simple">
<dt>-Fixed bug where smaller than default (2000) resolutions threw an error about</dt><dd><p>not being able to find the field in “unitynew”.  With non-default resolution,
“unitynew” was created without an attribute table, so one was created by
force.</p>
</dd>
<dt>-Removed mention of beta state and ecoinformatics from header of software</dt><dd><p>license.</p>
</dd>
<dt>-Modified overlap analysis toolbox so it reports an error directly in the</dt><dd><p>toolbox if the workspace name is too long.</p>
</dd>
</dl>
</div>
<div class="section" id="id49">
<h2>2.2.1 (2012-01-26)<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h2>
<p>Changes in InVEST 2.2.1</p>
<p>General:</p>
<p>This is a minor release which fixes the following defects:</p>
<p>-A variety of miscellaneous bugs were fixed that were causing crashes of the Coastal Protection model in Arc 9.3.
-Fixed an issue in the Pollination model that was looking for an InVEST1005 directory.
-The InVEST “models only” release had an entry for the InVEST 3.0 Beta tools, but was missing the underlying runtime.  This has been added to the models only 2.2.1 release at the cost of a larger installer.
-The default InVEST ArcMap document wouldn’t open in ArcGIS 9.3.  It can now be opened by Arc 9.3 and above.
-Minor updates to the Coastal Protection user’s guide.</p>
</div>
<div class="section" id="id50">
<h2>2.2.0 (2011-12-22)<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h2>
<p>In this release we include updates to the habitat risk assessment
model, updates to Coastal Vulnerability Tier 0 (previously named
Coastal Protection), and a new tier 1 Coastal Vulnerability tool.
Additionally, we are releasing a beta version of our 3.0 platform that
includes the terrestrial timber and carbon models.</p>
<p>See the “Marine Models” and “InVEST 3.0 Beta” sections below for more details.</p>
<p><strong>Marine Models</strong></p>
<ol class="arabic">
<li><p>Marine Python Extension Check</p>
<p>This tool has been updated to include extension requirements for the new
Coastal Protection T1 model.  It also reflects changes to the Habitat Risk
Assessment and Coastal Protection T0 models, as they no longer require the
PythonWin extension.</p>
</li>
<li><p>Habitat Risk Assessment (HRA)</p>
<p>This model has been updated and is now part of three-step toolset.  The
first step is a new Ratings Survey Tool which eliminates the need for
Microsoft Excel when users are providing habitat-stressor ratings.  This
Survey Tool now allows users to up- and down-weight the importance of
various criteria.  For step 2, a copy of the Grid the Seascape tool has been
placed in the HRA toolset.  In the last step, users will run the HRA model
which includes the following updates:</p>
<ul class="simple">
<li><p>New habitat outputs classifying risk as low, medium, and high</p></li>
<li><p>Model run status updates (% complete) in the message window</p></li>
<li><p>Improved habitat risk plots embedded in the output HTML</p></li>
</ul>
</li>
<li><p>Coastal Protection</p>
<p>This module is now split into sub-models, each with two parts.  The first
sub-model is Coastal Vulnerability (Tier 0) and the new addition is Coastal
Protection (Tier 1).</p>
<p>Coastal Vulnerability (T0)
Step 1) Fetch Calculator - there are no updates to this tool.
Step 2) Vulnerability Index</p>
<ul class="simple">
<li><p>Wave Exposure: In this version of the model, we define wave exposure for
sites facing the open ocean as the maximum of the weighted average of
wave’s power coming from the ocean or generated by local winds.  We
weight wave power coming from each of the 16 equiangular sector by the
percent of time that waves occur in that sector, and based on whether or
not fetch in that sector exceeds 20km.  For sites that are sheltered, wave
exposure is the average of wave power generated by the local storm winds
weighted by the percent occurrence of those winds in each sector.  This
new method takes into account the seasonality of wind and wave patterns
(storm waves generally come from a preferential direction), and helps
identify regions that are not exposed to powerful waves although they are
open to the ocean (e.g. the leeside of islands).</p></li>
<li><p>Natural Habitats: The ranking is now computed using the rank of all
natural habitats present in front of a segment, and we weight the lowest
ranking habitat 50% more than all other habitats.  Also, rankings and
protective distance information are to be provided by CSV file instead of
Excel.  With this new method, shoreline segments that have more habitats
than others will have a lower risk of inundation and/or erosion during
storms.</p></li>
<li><p>Structures: The model has been updated to now incorporate the presence of
structures by decreasing the ranking of shoreline segments that adjoin
structures.</p></li>
</ul>
<p>Coastal Protection (T1) - This is a new model which plots the amount of
sandy beach erosion or consolidated bed scour that backshore regions
experience in the presence or absence of natural habitats.  It is composed
of two steps: a Profile Generator and Nearshore Waves and Erosion.  It is
recommended to run the Profile Generator before the Nearshore Waves and
Erosion model.</p>
<p>Step 1) Profile Generator:  This tool helps the user generate a 1-dimensional
bathymetric and topographic profile perpendicular to the shoreline at the
user-defined location.  This model provides plenty of guidance for building
backshore profiles for beaches, marshes and mangroves.  It will help users
modify bathymetry profiles that they already have, or can generate profiles
for sandy beaches if the user has not bathymetric data.  Also, the model
estimates and maps the location of natural habitats present in front of the
region of interest.  Finally, it provides sample wave and wind data that
can be later used in the Nearshore Waves and Erosion model, based on
computed fetch values and default Wave Watch III data.</p>
<p>Step 2) Nearshore Waves and Erosion: This model estimates profiles of beach
erosion or values of rates of consolidated bed scour at a site as a function
of the type of habitats present in the area of interest.  The model takes
into account the protective effects of vegetation, coral and oyster reefs,
and sand dunes.  It also shows the difference of protection provided when
those habitats are present, degraded, or gone.</p>
</li>
<li><p>Aesthetic Quality</p>
<p>This model no longer requires users to provide a projection for Overlap
Analysis.  Instead, it uses the projection from the user-specified Area of
Interest (AOI) polygon.  Additionally, the population estimates for this
model have been fixed.</p>
</li>
</ol>
<p><strong>InVEST 3.0 Beta</strong></p>
<p>The 2.2.0 release includes a preliminary version of our InVEST 3.0 beta
platform.  It is included as a toolset named “InVEST 3.0 Beta” in the
InVEST220.tbx.  It is currently only supported with ArcGIS 10.  To launch
an InVEST 3.0 beta tool, double click on the desired tool in the InVEST 3.0
toolset then click “Ok” on the Arc toolbox screen that opens. The InVEST 3.0
tool panel has inputs very similar to the InVEST 2.2.0 versions of the tools
with the following modifications:</p>
<dl class="simple">
<dt>InVEST 3.0 Carbon:</dt><dd><ul class="simple">
<li><p>Fixes a minor bug in the 2.2 version that ignored floating point values
in carbon pool inputs.</p></li>
<li><p>Separation of carbon model into a biophysical and valuation model.</p></li>
<li><p>Calculates carbon storage and sequestration at the minimum resolution of
the input maps.</p></li>
<li><p>Runtime efficiency improved by an order of magnitude.</p></li>
<li><p>User interface streamlined including dynamic activation of inputs based
on user preference, direct link to documentation, and recall of inputs
based on user’s previous run.</p></li>
</ul>
</dd>
<dt>InVEST 3.0 Timber:</dt><dd><ul class="simple">
<li><p>User interface streamlined including dynamic activation of inputs based
on user preference, direct link to documentation, and recall of inputs
based on user’s previous run.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="id51">
<h2>2.1.1 (2011-10-17)<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h2>
<p>Changes in InVEST 2.1.1</p>
<p>General:</p>
<p>This is a minor release which fixes the following defects:</p>
<p>-A truncation error was fixed on nutrient retention and sedimentation model that involved division by the number of cells in a watershed.  Now correctly calculates floating point division.
-Minor typos were fixed across the user’s guide.</p>
</div>
<div class="section" id="beta-2011-05-11">
<h2>2.1 Beta (2011-05-11)<a class="headerlink" href="#beta-2011-05-11" title="Permalink to this headline">¶</a></h2>
<p>Updates to InVEST Beta</p>
<p>InVEST 2.1 . Beta</p>
<p>Changes in InVEST 2.1</p>
<p>General:</p>
<p>1.      InVEST versioning
We have altered our versioning scheme.  Integer changes will reflect major changes (e.g. the addition of marine models warranted moving from 1.x to 2.0).  An increment in the digit after the primary decimal indicates major new features (e.g the addition of a new model) or major revisions.  For example, this release is numbered InVEST 2.1 because two new models are included).  We will add another decimal to reflect minor feature revisions or bug fixes.  For example, InVEST 2.1.1 will likely be out soon as we are continually working to improve our tool.
2.      HTML guide
With this release, we have migrated the entire InVEST users. guide to an HTML format.  The HTML version will output a pdf version for use off-line, printing, etc.</p>
<p><strong>MARINE MODELS</strong></p>
<p>1.Marine Python Extension Check</p>
<p>-This tool has been updated to allow users to select the marine models they intend to run.  Based on this selection, it will provide a summary of which Python and ArcGIS extensions are necessary and if the Python extensions have been successfully installed on the user.s machine.</p>
<p>2.Grid the Seascape (GS)</p>
<p>-This tool has been created to allow marine model users to generate an seascape analysis grid within a specified area of interest (AOI).</p>
<p>-It only requires an AOI and cell size (in meters) as inputs, and produces a polygon grid which can be used as inputs for the Habitat Risk Assessment and Overlap Analysis models.</p>
<ol class="arabic simple" start="3">
<li><p>Coastal Protection</p></li>
</ol>
<ul class="simple">
<li><p>This is now a two-part model for assessing Coastal Vulnerability.  The first part is a tool for calculating fetch and the second maps the value of a Vulnerability Index, which differentiates areas with relatively high or low exposure to erosion and inundation during storms.</p></li>
<li><p>The model has been updated to now incorporate coastal relief and the protective influence of up to eight natural habitat input layers.</p></li>
<li><p>A global Wave Watch 3 dataset is also provided to allow users to quickly generate rankings for wind and wave exposure worldwide.</p></li>
</ul>
<ol class="arabic simple" start="4">
<li><p>Habitat Risk Assessment (HRA)</p></li>
</ol>
<p>This new model allows users to assess the risk posed to coastal and marine habitats by human activities and the potential consequences of exposure for the delivery of ecosystem services and biodiversity.  The HRA model is suited to screening the risk of current and future human activities in order to prioritize management strategies that best mitigate risk.</p>
<ol class="arabic simple" start="5">
<li><p>Overlap Analysis</p></li>
</ol>
<p>This new model maps current human uses in and around the seascape and summarizes the relative importance of various regions for particular activities.  The model was designed to produce maps that can be used to identify marine and coastal areas that are most important for human use, in particular recreation and fisheries, but also other activities.</p>
<p><strong>FRESHWATER MODELS</strong></p>
<p>All Freshwater models now support ArcMap 10.</p>
<p>Sample data:</p>
<ol class="arabic simple">
<li><p>Bug fix for error in Water_Tables.mdb Biophysical table where many field values were shifted over one column relative to the correct field name.</p></li>
<li><p>Bug fix for incorrect units in erosivity layer.</p></li>
</ol>
<p>Hydropower:</p>
<p>1.In Water Yield, new output tables have been added containing mean biophysical outputs (precipitation, actual and potential evapotranspiration, water yield)  for each watershed and sub-watershed.</p>
<p>Water Purification:</p>
<ol class="arabic simple">
<li><p>The Water Purification Threshold table now allows users to specify separate thresholds for nitrogen and phosphorus.   Field names thresh_n and thresh_p replace the old ann_load.</p></li>
<li><p>The Nutrient Retention output tables nutrient_watershed.dbf and nutrient_subwatershed.dbf now include a column for nutrient retention per watershed/sub-watershed.</p></li>
<li><p>In Nutrient Retention, some output file names have changed.</p></li>
<li><p>The user’s guide has been updated to explain more accurately the inclusion of thresholds in the biophysical service estimates.</p></li>
</ol>
<p>Sedimentation:</p>
<ol class="arabic simple">
<li><p>The Soil Loss output tables sediment_watershed.dbf and sediment_subwatershed.dbf now include a column for sediment retention per watershed/sub-watershed.</p></li>
<li><p>In Soil Loss, some output file names have changed.</p></li>
<li><p>The default input value for Slope Threshold is now 75.</p></li>
<li><p>The user’s guide has been updated to explain more accurately the inclusion of thresholds in the biophysical service estimates.</p></li>
<li><p>Valuation: Bug fix where the present value was not being applied correctly.</p></li>
</ol>
</div>
<div class="section" id="beta-2011-02-14">
<h2>2.0 Beta (2011-02-14)<a class="headerlink" href="#beta-2011-02-14" title="Permalink to this headline">¶</a></h2>
<p>Changes in InVEST 2.0</p>
<p>InVEST 1.005 is a minor release with the following modification:</p>
<ol class="arabic">
<li><p>Aesthetic Quality</p>
<blockquote>
<div><p>This new model allows users to determine the locations from which new nearshore or offshore features can be seen.  It generates viewshed maps that can be used to identify the visual footprint of new offshore development.</p>
</div></blockquote>
</li>
<li><p>Coastal Vulnerability</p>
<blockquote>
<div><p>This new model produces maps of coastal human populations and a coastal exposure to erosion and inundation index map.  These outputs can be used to understand the relative contributions of different variables to coastal exposure and to highlight the protective services offered by natural habitats.</p>
</div></blockquote>
</li>
<li><p>Aquaculture</p>
<blockquote>
<div><p>This new model is used to evaluate how human activities (e.g., addition or removal of farms, changes in harvest management practices) and climate change (e.g., change in sea surface temperature) may affect the production and economic value of aquacultured Atlantic salmon.</p>
</div></blockquote>
</li>
<li><p>Wave Energy</p>
<blockquote>
<div><p>This new model provides spatially explicit information, showing potential areas for siting Wave Energy conversion (WEC) facilities with the greatest energy production and value.  This site- and device-specific information for the WEC facilities can then be used to identify and quantify potential trade-offs that may arise when siting WEC facilities.</p>
</div></blockquote>
</li>
<li><p>Avoided Reservoir Sedimentation</p>
<blockquote>
<div><ul class="simple">
<li><p>The name of this model has been changed to the Sediment Retention model.</p></li>
<li><p>We have added a water quality valuation model for sediment retention. The user now has the option to select avoided dredge cost analysis, avoided water treatment cost analysis or both.  The water quality valuation approach is the same as that used in the Water Purification: Nutrient Retention model.</p></li>
<li><p>The threshold information for allowed sediment loads (TMDL, dead volume, etc.) are now input in a stand alone table instead of being included in the valuation table. This adjusts the biophysical service output for any social allowance of pollution. Previously, the adjustment was only done in the valuation model.</p></li>
<li><p>The watersheds and sub-watershed layers are now input as shapefiles instead of rasters.</p></li>
<li><p>Final outputs are now aggregated to the sub-basin scale. The user must input a sub-basin shapefile. We provide the Hydro 1K dataset as a starting option. See users guide for changes to many file output names.</p></li>
<li><p>Users are strongly advised not to interpret pixel-scale outputs for hydrological understanding or decision-making of any kind. Pixel outputs should only be used for calibration/validation or model checking.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Hydropower Production</p>
<blockquote>
<div><ul class="simple">
<li><p>The watersheds and sub-watershed layers are now input as shapefiles instead of rasters.</p></li>
<li><p>Final outputs are now aggregated to the sub-basin scale. The user must input a sub-basin shapefile. We provide the Hydro 1K dataset as a starting option. See users guide for changes to many file output names.</p></li>
<li><p>Users are strongly advised not to interpret pixel-scale outputs for hydrological understanding or decision-making of any kind. Pixel outputs should only be used for calibration/validation or model checking.</p></li>
<li><p>The calibration constant for each watershed is now input in a stand-alone table instead of being included in the valuation table. This makes running the water scarcity model simpler.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Water Purification: Nutrient Retention</p>
<blockquote>
<div><ul class="simple">
<li><p>The threshold information for allowed pollutant levels (TMDL, etc.) are now input in a stand alone table instead of being included in the valuation table. This adjusts the biophysical service output for any social allowance of pollution. Previously, the adjustment was only done in the valuation model.</p></li>
<li><p>The watersheds and sub-watershed layers are now input as shapefiles instead of rasters.</p></li>
<li><p>Final outputs are now aggregated to the sub-basin scale. The user must input a sub-basin shapefile. We provide the Hydro 1K dataset as a starting option. See users guide for changes to many file output names.</p></li>
<li><p>Users are strongly advised not to interpret pixel-scale outputs for hydrological understanding or decision-making of any kind. Pixel outputs should only be used for calibration/validation or model checking.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Carbon Storage and Sequestration</p>
<blockquote>
<div><p>The model now outputs an aggregate sum of the carbon storage.</p>
</div></blockquote>
</li>
<li><p>Habitat Quality and Rarity</p>
<blockquote>
<div><p>This model had an error while running ReclassByACII if the land cover codes were not sorted alphabetically.  This has now been corrected and it sorts the reclass file before running the reclassification</p>
<p>The model now outputs an aggregate sum of the habitat quality.</p>
</div></blockquote>
</li>
<li><p>Pollination</p>
<p>In this version, the pollination model accepts an additional parameter which indicated the proportion of a crops yield that is attributed to wild pollinators.</p>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="scripting.html" class="btn btn-neutral float-right" title="Tutorial: Batch Processing on Windows" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cli.html" class="btn btn-neutral float-left" title="The InVEST CLI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, The Natural Capital Project

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>